<!DOCTYPE html>
<html lang="zh-cn" class="lang-zh-cn">
    <head>
	<meta name="generator" content="Hugo 0.111.3"><meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="keywords" content="Hugo,Blog,Almighty.YanTao,yantao," /><meta name="description" content="一个混迹在IT行业的菜鸟" />
<meta itemprop="description" content="一个混迹在IT行业的菜鸟" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta itemprop="name" content="Almighty.YanTao" />
<link href="/index.xml" title="Almighty.YanTao" type="application/rss+xml" rel="alternate" />
<title>Almighty.YanTao</title><link rel="stylesheet" href="/main.93627df46d08f0fe0f2039b67a8f3d0fac9a0798cda92666aedb82d8221354d0.css" integrity="sha256-k2J99G0I8P4PIDm2eo89D6yaB5jNqSZmrtuC2CITVNA=" /><meta property="og:site_name" content="Almighty.YanTao" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Almighty.YanTao" />
<meta property="og:description" content="一个混迹在IT行业的菜鸟" />
<meta property="og:url" content="/" /><meta property="article:publisher" content="/" /><meta property="og:updated_time" content=" 2023-07-12T18:54:09&#43;08:00 " /><meta name="theme-color" content="#dd6065" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="Almighty.YanTao" />
<meta name="apple-mobile-web-app-status-bar-style" content="white" />

<meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@Almighty.YanTao" />
    <meta name="twitter:creator" content="@Almighty.YanTao" /><meta name="twitter:title" content="Almighty.YanTao" />
<meta name="twitter:description" content="一个混迹在IT行业的菜鸟" />
<meta name="twitter:url" content="/" /><meta name="twitter:image" content="" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /><link rel="manifest" href="/manifest.json" /><link href="/icon.png" rel="shortcut icon" />
<link href="/icon.png" rel="Bookmark" />
<link rel="apple-touch-icon" href="/icon.png" /><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "\/","author": {
    "@type": "Person",
    "name": "Almighty.YanTao"
  },"description": "一个混迹在IT行业的菜鸟","name": "Almighty.YanTao"
}
</script> 


    </head>

    <body class="dark:bg-darkBg dark:text-darkText">
        <div class="relative mx-auto shadow-lg md:max-w-4xl xl:max-w-4xl 2xl:max-w-4xl">
            <div class="main flex flex-col justify-between bg-white dark:bg-darkFg"><header
    class="relative"
><nav id="nav" class="navbar top-0 z-10 flex items-center border-b px-5 py-6 dark:border-darkBorder md:px-10">
            <div class="route-items flex w-full items-center justify-around"><a
                        title="首页"
                        data-active-link="/"
                        href="/"
                        class="
                            link-exact-active
                         relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-home flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">首页</span>
                    </a><a
                        title="关于我"
                        data-active-link="/about/"
                        href="/about/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-heart flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">关于我</span>
                    </a><a
                        title="归档"
                        data-active-link="/archives/"
                        href="/archives/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-bar-chart flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">归档</span>
                    </a><a
                        title="GitHub"
                        data-active-link="/github/"
                        href="/github/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-github flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">GitHub</span>
                    </a><a
                        title="搜索"
                        data-active-link="/search/"
                        href="/search/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-search flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">搜索</span>
                    </a>
            </div>
        </nav><div class="dark-mode-switch absolute right-0 top-0 z-10 cursor-pointer pr-2 pt-2 text-xl leading-none">
    <i class="eva eva-moon opacity-20 dark:opacity-70"></i>
</div>
</header>
<main class=" relative flex flex-grow" id="swup"><style>:root {
        --font:Times New Roman,Times,Heti Song,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;
    }</style>
<div class="type-page layout- w-full"><div class="page-blog relative px-6 md:px-10">
        <div class="article-list mx-auto">
            <div class="flex items-center py-6 text-xl">
                <i class="eva eva-bar-chart-outline mr-2"></i><span>共 <span class="mx-1 text-theme">22</span> 篇文章</span>
            </div><div><article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/07/08/%E5%88%A9%E7%94%A8-shell-%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98%E7%9A%84%E8%AF%BB%E5%86%99%E6%83%85%E5%86%B5.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">利用 shell 监控磁盘的读写情况</div><div class="mt-4 mb-1 line-clamp-2" title="背景 在做监控的时候，zabbix 自带的不支持做读写性能的监控，那么在有这个需求的时候就很蛋疼了，因此采用 shell 脚本的形式，然后将数据返回给 zabbix 中去
配置方式 conf 配置文件 1 UserParameter=qunhe.it.disk.info.iospeed[*],/etc/zabbix/zabbix_agentd.d/zabbix_disk_speed.sh $1 shell 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #!/bin/bash DISK=&amp;#34;$1&amp;#34; DISK_MOUNT=&amp;#34;&amp;#34; DISK_SPEED=&amp;#34;&amp;#34; DISK_SPEED_UNIT=&amp;#34;&amp;#34; DISK_AVAIL=&amp;#34;&amp;#34; OUTPUT_FILE=&amp;#34;/tmp/${DISK}_iotest&amp;#34; if [ ! -d $DISK ] || [ -z $DISK ]; then echo &amp;#34;the disk isn&amp;#39;t exist !">背景 在做监控的时候，zabbix 自带的不支持做读写性能的监控，那么在有这个需求的时候就很蛋疼了，因此采用 shell 脚本的形式，然后将数据返回给 zabbix 中去
配置方式 conf 配置文件 1 UserParameter=qunhe.it.disk.info.iospeed[*],/etc/zabbix/zabbix_agentd.d/zabbix_disk_speed.sh $1 shell 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #!/bin/bash DISK=&amp;#34;$1&amp;#34; DISK_MOUNT=&amp;#34;&amp;#34; DISK_SPEED=&amp;#34;&amp;#34; DISK_SPEED_UNIT=&amp;#34;&amp;#34; DISK_AVAIL=&amp;#34;&amp;#34; OUTPUT_FILE=&amp;#34;/tmp/${DISK}_iotest&amp;#34; if [ ! -d $DISK ] || [ -z $DISK ]; then echo &amp;#34;the disk isn&amp;#39;t exist !</div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年7月8日 00:00:00"datetime="2023-07-08T00:00:00+08:00">2023年7月8日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/shell"
                    title="shell"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>shell</span>
                </a><a
                    href="/tags/%E7%A3%81%E7%9B%98"
                    title="磁盘"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>磁盘</span>
                </a><a
                    href="/tags/%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99"
                    title="磁盘读写"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>磁盘读写</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/shell"
                    title="shell"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>shell</span>
                </a><a
                    href="/tags/%E7%A3%81%E7%9B%98"
                    title="磁盘"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>磁盘</span>
                </a><a
                    href="/tags/%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99"
                    title="磁盘读写"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>磁盘读写</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/"
    class="article-cover h-0Page(/posts/zabbix/制作一个内部的 zabbix 监控 Agent/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#1a0d0e, #a33a3b);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_672x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
            data-src="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner.png"
            src="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_6649a3df90dcab092fbdb683f3abbc83.jpg"
            
                data-srcset="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_672x0_resize_catmullrom_3.png 1080w"
            alt="制作一个内部的 zabbix-agent 快速部署脚本"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_672x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
                src="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner.png"srcset="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_672x0_resize_catmullrom_3.png 1080w"alt="制作一个内部的 zabbix-agent 快速部署脚本"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/banner_hu157890c154c75d28a1c0b35884f75d63_233537_6649a3df90dcab092fbdb683f3abbc83.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">制作一个内部的 zabbix-agent 快速部署脚本</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="下载官方的基础 agent 部署包 官方地址：点击到达 1 curl -O https://cdn.zabbix.com/zabbix/binaries/stable/5.0/5.0.36/zabbix_agent-5.0.36-linux-3.0-i386-static.tar.gz 编写 install 脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #!">下载官方的基础 agent 部署包 官方地址：点击到达 1 curl -O https://cdn.zabbix.com/zabbix/binaries/stable/5.0/5.0.36/zabbix_agent-5.0.36-linux-3.0-i386-static.tar.gz 编写 install 脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #!</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/07/06/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E7%9A%84-zabbix-agent-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">制作一个内部的 zabbix-agent 快速部署脚本</a><div class="mt-4 mb-1 line-clamp-2" title="下载官方的基础 agent 部署包 官方地址：点击到达 1 curl -O https://cdn.zabbix.com/zabbix/binaries/stable/5.0/5.0.36/zabbix_agent-5.0.36-linux-3.0-i386-static.tar.gz 编写 install 脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #!">下载官方的基础 agent 部署包 官方地址：点击到达 1 curl -O https://cdn.zabbix.com/zabbix/binaries/stable/5.0/5.0.36/zabbix_agent-5.0.36-linux-3.0-i386-static.tar.gz 编写 install 脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #!</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年7月6日 00:00:00"datetime="2023-07-06T00:00:00+08:00">2023年7月6日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>3 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/zabbix"
                    title="zabbix"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix</span>
                </a><a
                    href="/tags/zabbix-agent"
                    title="zabbix-agent"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix-agent</span>
                </a><a
                    href="/tags/agent"
                    title="agent"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>agent</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/zabbix"
                    title="zabbix"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix</span>
                </a><a
                    href="/tags/zabbix-agent"
                    title="zabbix-agent"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix-agent</span>
                </a><a
                    href="/tags/agent"
                    title="agent"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>agent</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/"
    class="article-cover h-0Page(/posts/other/Centos Install Confluence/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#f6f7f8, #ccc);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_956x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
            data-src="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner.png"
            src="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_40515351d39bfb6db522ea6d9cd1fccd.jpg"
            
                data-srcset="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_956x0_resize_catmullrom_3.png 1080w"
            alt="CentOS 7 安装 Confluence 并且破解"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_956x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
                src="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner.png"srcset="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_956x0_resize_catmullrom_3.png 1080w"alt="CentOS 7 安装 Confluence 并且破解"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/banner_huc06033f5e782140dcc5da83974cb7a35_82830_40515351d39bfb6db522ea6d9cd1fccd.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">CentOS 7 安装 Confluence 并且破解</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="简介 Confluence是一个专业的企业知识管理与协同软件，也可以用于构建企业wiki。使用简单，但它强大的编辑和站点管理特征能够帮助团队成员之间共享信息、文档协作、集体讨论，信息推送。部署Confluence前，需确认服务器已部署Nginx&#43;MySQL环境。
搭建环境 系统版本：CentOS Linux release 7.6.1810 (Core)
confluence版本：Confluence 7.13.4（最新版本）
Java版本：java-11-openjdk-devel.x86_64
confluence解除工具：confluence_keygen.jar
注：解除工具链接: https://pan.baidu.com/s/1po6wouAIZPHbMG39oKKMVw
提取码: guck
Mysql-server版本：mysql-community-server.x86_64 0:5.7.22-1.el7​
mysql-connector-java版本：mysql-connector-java-5.1.49 注：以上插件下载地址如下截图可自选【系统版本】和【插件版本】，切记不要使用最新版本插件，由于官网文档说明不支持最新版，然后我特意亲测了一下确实不支持，最大支持mysql-connector-java-5.1.x 高于此版本都不支持，建议使用5.1.x版本插件，插件下载地址： https://downloads.mysql.com/archives/c-j/
关闭防火墙 systemctl stop firewalld.service​
禁止防火墙开机自启 systemctl disable firewalld.service​
关闭 selinux​ sed -i ‘s/SELINUX=enforcing/SELINUX=disabled/g’ /etc/selinux/config
重启系统即可 reboot
安装数据库 下载mysql数据库社区yum源 1 2 3 wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm​ rpm -Uvh --force --nodeps mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 如果出现：
Public key for mysql-community-common-5.7.42-1.el7.x86_64.rpm is not installed
错误，那么就需要需要重新导入密钥了
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
1 2 3 4 5 6 7 8 9 10 11 12 13 ### 修改配置文件 ```bash vi /etc/my.">简介 Confluence是一个专业的企业知识管理与协同软件，也可以用于构建企业wiki。使用简单，但它强大的编辑和站点管理特征能够帮助团队成员之间共享信息、文档协作、集体讨论，信息推送。部署Confluence前，需确认服务器已部署Nginx&#43;MySQL环境。
搭建环境 系统版本：CentOS Linux release 7.6.1810 (Core)
confluence版本：Confluence 7.13.4（最新版本）
Java版本：java-11-openjdk-devel.x86_64
confluence解除工具：confluence_keygen.jar
注：解除工具链接: https://pan.baidu.com/s/1po6wouAIZPHbMG39oKKMVw
提取码: guck
Mysql-server版本：mysql-community-server.x86_64 0:5.7.22-1.el7​
mysql-connector-java版本：mysql-connector-java-5.1.49 注：以上插件下载地址如下截图可自选【系统版本】和【插件版本】，切记不要使用最新版本插件，由于官网文档说明不支持最新版，然后我特意亲测了一下确实不支持，最大支持mysql-connector-java-5.1.x 高于此版本都不支持，建议使用5.1.x版本插件，插件下载地址： https://downloads.mysql.com/archives/c-j/
关闭防火墙 systemctl stop firewalld.service​
禁止防火墙开机自启 systemctl disable firewalld.service​
关闭 selinux​ sed -i ‘s/SELINUX=enforcing/SELINUX=disabled/g’ /etc/selinux/config
重启系统即可 reboot
安装数据库 下载mysql数据库社区yum源 1 2 3 wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm​ rpm -Uvh --force --nodeps mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 如果出现：
Public key for mysql-community-common-5.7.42-1.el7.x86_64.rpm is not installed
错误，那么就需要需要重新导入密钥了
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
1 2 3 4 5 6 7 8 9 10 11 12 13 ### 修改配置文件 ```bash vi /etc/my.</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/06/16/centos-7-%E5%AE%89%E8%A3%85-confluence-%E5%B9%B6%E4%B8%94%E7%A0%B4%E8%A7%A3.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">CentOS 7 安装 Confluence 并且破解</a><div class="mt-4 mb-1 line-clamp-2" title="简介 Confluence是一个专业的企业知识管理与协同软件，也可以用于构建企业wiki。使用简单，但它强大的编辑和站点管理特征能够帮助团队成员之间共享信息、文档协作、集体讨论，信息推送。部署Confluence前，需确认服务器已部署Nginx&#43;MySQL环境。
搭建环境 系统版本：CentOS Linux release 7.6.1810 (Core)
confluence版本：Confluence 7.13.4（最新版本）
Java版本：java-11-openjdk-devel.x86_64
confluence解除工具：confluence_keygen.jar
注：解除工具链接: https://pan.baidu.com/s/1po6wouAIZPHbMG39oKKMVw
提取码: guck
Mysql-server版本：mysql-community-server.x86_64 0:5.7.22-1.el7​
mysql-connector-java版本：mysql-connector-java-5.1.49 注：以上插件下载地址如下截图可自选【系统版本】和【插件版本】，切记不要使用最新版本插件，由于官网文档说明不支持最新版，然后我特意亲测了一下确实不支持，最大支持mysql-connector-java-5.1.x 高于此版本都不支持，建议使用5.1.x版本插件，插件下载地址： https://downloads.mysql.com/archives/c-j/
关闭防火墙 systemctl stop firewalld.service​
禁止防火墙开机自启 systemctl disable firewalld.service​
关闭 selinux​ sed -i ‘s/SELINUX=enforcing/SELINUX=disabled/g’ /etc/selinux/config
重启系统即可 reboot
安装数据库 下载mysql数据库社区yum源 1 2 3 wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm​ rpm -Uvh --force --nodeps mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 如果出现：
Public key for mysql-community-common-5.7.42-1.el7.x86_64.rpm is not installed
错误，那么就需要需要重新导入密钥了
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
1 2 3 4 5 6 7 8 9 10 11 12 13 ### 修改配置文件 ```bash vi /etc/my.">简介 Confluence是一个专业的企业知识管理与协同软件，也可以用于构建企业wiki。使用简单，但它强大的编辑和站点管理特征能够帮助团队成员之间共享信息、文档协作、集体讨论，信息推送。部署Confluence前，需确认服务器已部署Nginx&#43;MySQL环境。
搭建环境 系统版本：CentOS Linux release 7.6.1810 (Core)
confluence版本：Confluence 7.13.4（最新版本）
Java版本：java-11-openjdk-devel.x86_64
confluence解除工具：confluence_keygen.jar
注：解除工具链接: https://pan.baidu.com/s/1po6wouAIZPHbMG39oKKMVw
提取码: guck
Mysql-server版本：mysql-community-server.x86_64 0:5.7.22-1.el7​
mysql-connector-java版本：mysql-connector-java-5.1.49 注：以上插件下载地址如下截图可自选【系统版本】和【插件版本】，切记不要使用最新版本插件，由于官网文档说明不支持最新版，然后我特意亲测了一下确实不支持，最大支持mysql-connector-java-5.1.x 高于此版本都不支持，建议使用5.1.x版本插件，插件下载地址： https://downloads.mysql.com/archives/c-j/
关闭防火墙 systemctl stop firewalld.service​
禁止防火墙开机自启 systemctl disable firewalld.service​
关闭 selinux​ sed -i ‘s/SELINUX=enforcing/SELINUX=disabled/g’ /etc/selinux/config
重启系统即可 reboot
安装数据库 下载mysql数据库社区yum源 1 2 3 wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm​ rpm -Uvh --force --nodeps mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 如果出现：
Public key for mysql-community-common-5.7.42-1.el7.x86_64.rpm is not installed
错误，那么就需要需要重新导入密钥了
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
1 2 3 4 5 6 7 8 9 10 11 12 13 ### 修改配置文件 ```bash vi /etc/my.</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年6月16日 00:00:00"datetime="2023-06-16T00:00:00+08:00">2023年6月16日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>2 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/centos"
                    title="CentOS"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>CentOS</span>
                </a><a
                    href="/tags/confluence"
                    title="Confluence"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>Confluence</span>
                </a><a
                    href="/tags/%E7%A0%B4%E8%A7%A3"
                    title="破解"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>破解</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/centos"
                    title="CentOS"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>CentOS</span>
                </a><a
                    href="/tags/confluence"
                    title="Confluence"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>Confluence</span>
                </a><a
                    href="/tags/%E7%A0%B4%E8%A7%A3"
                    title="破解"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>破解</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/05/19/vsphere-vcenter-6.5%E4%BB%A5%E4%B8%8A%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%8580%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86.html/"
    class="article-cover h-0Page(/posts/other/VSPhere VCenter 6.5以上版本安装80%失败处理/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="padding-bottom:42%;"
>
    <picture class="noscript-hidden"><img
            data-src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202305191745679.png"
            src="/images/outload.svg"
            alt="VSphere VCenter 6.5以上版本安装80%失败处理"
            style="background-color: #fff;"
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><img
                src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202305191745679.png"alt="VSphere VCenter 6.5以上版本安装80%失败处理"style="background-color: #fff;"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">VSphere VCenter 6.5以上版本安装80%失败处理</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="起因 VCenter磁盘满，手贱ssh删除日志后重启失败，选择重装。故障：VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 Th&amp;hellip;
故障 VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 The password change operation failed.
解决 在80%时通过VSClient打开VC宿主虚机（注意要在第一时间打开，而不是已经提示错误。出现错误提示只能重新开始安装而不能继续） 重启在bios时按e进入GNU GRUB Menu 选择linux开头的这一行，在最后添加空格rw init=/bin/bash，然后F10进入 输入mount -o remount,rw / 回车（注意这个”/”别丢了） passwd 两次输入密码，建议用安装时设置的密码 umount /（注意这个”/”别丢了） reboot -f 主要是因为系统版本的问题，网上分享的一般都是：4602587 版本的，这个版本有 BUG，可以换成 U1G（8024368）">起因 VCenter磁盘满，手贱ssh删除日志后重启失败，选择重装。故障：VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 Th&amp;hellip;
故障 VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 The password change operation failed.
解决 在80%时通过VSClient打开VC宿主虚机（注意要在第一时间打开，而不是已经提示错误。出现错误提示只能重新开始安装而不能继续） 重启在bios时按e进入GNU GRUB Menu 选择linux开头的这一行，在最后添加空格rw init=/bin/bash，然后F10进入 输入mount -o remount,rw / 回车（注意这个”/”别丢了） passwd 两次输入密码，建议用安装时设置的密码 umount /（注意这个”/”别丢了） reboot -f 主要是因为系统版本的问题，网上分享的一般都是：4602587 版本的，这个版本有 BUG，可以换成 U1G（8024368）</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/05/19/vsphere-vcenter-6.5%E4%BB%A5%E4%B8%8A%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%8580%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">VSphere VCenter 6.5以上版本安装80%失败处理</a><div class="mt-4 mb-1 line-clamp-2" title="起因 VCenter磁盘满，手贱ssh删除日志后重启失败，选择重装。故障：VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 Th&amp;hellip;
故障 VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 The password change operation failed.
解决 在80%时通过VSClient打开VC宿主虚机（注意要在第一时间打开，而不是已经提示错误。出现错误提示只能重新开始安装而不能继续） 重启在bios时按e进入GNU GRUB Menu 选择linux开头的这一行，在最后添加空格rw init=/bin/bash，然后F10进入 输入mount -o remount,rw / 回车（注意这个”/”别丢了） passwd 两次输入密码，建议用安装时设置的密码 umount /（注意这个”/”别丢了） reboot -f 主要是因为系统版本的问题，网上分享的一般都是：4602587 版本的，这个版本有 BUG，可以换成 U1G（8024368）">起因 VCenter磁盘满，手贱ssh删除日志后重启失败，选择重装。故障：VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 Th&amp;hellip;
故障 VC6.5安装卡80%，原因是安装包root密码过期了,root不可用。而且按照提示修改密码一直提示 The password change operation failed.
解决 在80%时通过VSClient打开VC宿主虚机（注意要在第一时间打开，而不是已经提示错误。出现错误提示只能重新开始安装而不能继续） 重启在bios时按e进入GNU GRUB Menu 选择linux开头的这一行，在最后添加空格rw init=/bin/bash，然后F10进入 输入mount -o remount,rw / 回车（注意这个”/”别丢了） passwd 两次输入密码，建议用安装时设置的密码 umount /（注意这个”/”别丢了） reboot -f 主要是因为系统版本的问题，网上分享的一般都是：4602587 版本的，这个版本有 BUG，可以换成 U1G（8024368）</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年5月19日 00:00:00"datetime="2023-05-19T00:00:00+08:00">2023年5月19日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/vsphere"
                    title="VSphere"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>VSphere</span>
                </a><a
                    href="/tags/vcenter"
                    title="VCenter"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>VCenter</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/vsphere"
                    title="VSphere"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>VSphere</span>
                </a><a
                    href="/tags/vcenter"
                    title="VCenter"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>VCenter</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/05/18/%E8%A7%A3%E5%86%B3nginx-ssl-%E4%BB%A3%E7%90%86-tomcat-%E8%8E%B7%E5%8F%96-scheme-%E6%80%BB%E6%98%AF-http-%E9%97%AE%E9%A2%98.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">解决Nginx SSL 代理 Tomcat 获取 Scheme 总是 Http 问题</div><div class="mt-4 mb-1 line-clamp-2" title="背景 公司之前用的是http，但是出于苹果app审核和服务器安全性问题，要改为https，我们公司用的是沃通的ssl，按照沃通的官方文档提供的步骤完成服务器的配置。 架构上使用了 Nginx &#43;tomcat 集群, 且nginx下配置了SSL,tomcat 没有配置SSL,项目使用https协议。
原因 配置成功后明明是https url请求,发现 log里面，tomcat获取scheme的时候，一直是http，而不是想像中的https
1 2 3 4 5 6 7 8 0415 16:01:10 INFO (PaymentInterceptor.java:44) preHandle() - requestStringForLog: { &amp;#34;request.getRequestURL():&amp;#34;: &amp;#34;http://m.xxx.com/payment/paymentChannel?id=212&amp;amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6&amp;#34;, &amp;#34;request.getMethod:&amp;#34;: &amp;#34;GET&amp;#34;, &amp;#34;_parameterMap&amp;#34;: { &amp;#34;id&amp;#34;: [&amp;#34;212&amp;#34;], &amp;#34;s&amp;#34;: [&amp;#34;a84485e0985afe97fffd7fd7741c93851d83a4f6&amp;#34;] } } request.getRequestURL() 输出出来的 一直是
http://m.xxx.com/payment/paymentChannel?id=212&amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6 但是浏览器中的URL却是
https://m.xxx.com/payment/paymentChannel?id=212&amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6 下面我们进一步研究发现，java API上写得很清楚:
1 2 3 4 5 getRequestURL(): Reconstructs the URL the client used to make the request. The returned URL contains a protocol, server name, port number, and server path, but it does not include query string parameters.">背景 公司之前用的是http，但是出于苹果app审核和服务器安全性问题，要改为https，我们公司用的是沃通的ssl，按照沃通的官方文档提供的步骤完成服务器的配置。 架构上使用了 Nginx &#43;tomcat 集群, 且nginx下配置了SSL,tomcat 没有配置SSL,项目使用https协议。
原因 配置成功后明明是https url请求,发现 log里面，tomcat获取scheme的时候，一直是http，而不是想像中的https
1 2 3 4 5 6 7 8 0415 16:01:10 INFO (PaymentInterceptor.java:44) preHandle() - requestStringForLog: { &amp;#34;request.getRequestURL():&amp;#34;: &amp;#34;http://m.xxx.com/payment/paymentChannel?id=212&amp;amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6&amp;#34;, &amp;#34;request.getMethod:&amp;#34;: &amp;#34;GET&amp;#34;, &amp;#34;_parameterMap&amp;#34;: { &amp;#34;id&amp;#34;: [&amp;#34;212&amp;#34;], &amp;#34;s&amp;#34;: [&amp;#34;a84485e0985afe97fffd7fd7741c93851d83a4f6&amp;#34;] } } request.getRequestURL() 输出出来的 一直是
http://m.xxx.com/payment/paymentChannel?id=212&amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6 但是浏览器中的URL却是
https://m.xxx.com/payment/paymentChannel?id=212&amp;s=a84485e0985afe97fffd7fd7741c93851d83a4f6 下面我们进一步研究发现，java API上写得很清楚:
1 2 3 4 5 getRequestURL(): Reconstructs the URL the client used to make the request. The returned URL contains a protocol, server name, port number, and server path, but it does not include query string parameters.</div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年5月18日 00:00:00"datetime="2023-05-18T00:00:00+08:00">2023年5月18日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/nginx"
                    title="nginx"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>nginx</span>
                </a><a
                    href="/tags/tomcat"
                    title="tomcat"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>tomcat</span>
                </a><a
                    href="/tags/ssl"
                    title="SSL"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>SSL</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/nginx"
                    title="nginx"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>nginx</span>
                </a><a
                    href="/tags/tomcat"
                    title="tomcat"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>tomcat</span>
                </a><a
                    href="/tags/ssl"
                    title="SSL"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>SSL</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/04/24/centos-7-8-%E5%BC%80%E5%90%AFbbr%E5%8A%A0%E9%80%9F.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">CentOS 7 &amp; 8 开启BBR加速</div><div class="mt-4 mb-1 line-clamp-2" title=" CentOS7 一键开启加速脚本 1 wget -N --no-check-certificate &amp;#34;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&amp;#34; &amp;amp;&amp;amp; chmod &#43;x tcp.sh &amp;amp;&amp;amp; ./tcp.sh 建议安装：BBR魔改加速
CentOS8 开启BBR加速 1 2 3 4 echo &amp;#34;net.core.default_qdisc=fq&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf echo &amp;#34;net.ipv4.tcp_congestion_control=bbr&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf sysctl -p reboot 检测是否开启成功 1 2 3 4 sysctl -n net.ipv4.tcp_congestion_control 。 ## 会返回bbr 。 lsmod | grep bbr ## 会返回tcp_bbr "> CentOS7 一键开启加速脚本 1 wget -N --no-check-certificate &amp;#34;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&amp;#34; &amp;amp;&amp;amp; chmod &#43;x tcp.sh &amp;amp;&amp;amp; ./tcp.sh 建议安装：BBR魔改加速
CentOS8 开启BBR加速 1 2 3 4 echo &amp;#34;net.core.default_qdisc=fq&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf echo &amp;#34;net.ipv4.tcp_congestion_control=bbr&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf sysctl -p reboot 检测是否开启成功 1 2 3 4 sysctl -n net.ipv4.tcp_congestion_control 。 ## 会返回bbr 。 lsmod | grep bbr ## 会返回tcp_bbr </div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年4月24日 00:00:00"datetime="2023-04-24T00:00:00+08:00">2023年4月24日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/centos"
                    title="centos"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>centos</span>
                </a><a
                    href="/tags/bbr"
                    title="bbr"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>bbr</span>
                </a><a
                    href="/tags/%E5%8A%A0%E9%80%9F"
                    title="加速"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>加速</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/centos"
                    title="centos"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>centos</span>
                </a><a
                    href="/tags/bbr"
                    title="bbr"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>bbr</span>
                </a><a
                    href="/tags/%E5%8A%A0%E9%80%9F"
                    title="加速"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>加速</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/"
    class="article-cover h-0Page(/posts/wireguard/wg-quick Bash3 的问题/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#e5d3d3, #b37678);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
            data-src="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img.png"
            src="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1ab723ab58b2faf975193f87837e8efa.jpg"
            
                data-srcset="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_catmullrom_3.png 1440w"
            alt="解决 wg-quick 在 Mac 上 bash 3 无法运行的问题"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
                src="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img.png"srcset="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_catmullrom_3.png 1440w"alt="解决 wg-quick 在 Mac 上 bash 3 无法运行的问题"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1ab723ab58b2faf975193f87837e8efa.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">解决 wg-quick 在 Mac 上 bash 3 无法运行的问题</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="问题原因 我可以理解，开发人员不想使用苹果使用的旧bash v3。但从用户的帖子来看，安装一个较新的bash并不那么好
所以我看了wireguard的wg-quick。需要支持的唯一变化，两个bash版本都是为了摆脱关联数组SERVICE_DNS，并处理v3的BASHPID。
解决方案 那么就有了一下的操作
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 diff --git a/src/tools/wg-quick/darwin.">问题原因 我可以理解，开发人员不想使用苹果使用的旧bash v3。但从用户的帖子来看，安装一个较新的bash并不那么好
所以我看了wireguard的wg-quick。需要支持的唯一变化，两个bash版本都是为了摆脱关联数组SERVICE_DNS，并处理v3的BASHPID。
解决方案 那么就有了一下的操作
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 diff --git a/src/tools/wg-quick/darwin.</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/04/23/%E8%A7%A3%E5%86%B3-wg-quick-%E5%9C%A8-mac-%E4%B8%8A-bash-3-%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">解决 wg-quick 在 Mac 上 bash 3 无法运行的问题</a><div class="mt-4 mb-1 line-clamp-2" title="问题原因 我可以理解，开发人员不想使用苹果使用的旧bash v3。但从用户的帖子来看，安装一个较新的bash并不那么好
所以我看了wireguard的wg-quick。需要支持的唯一变化，两个bash版本都是为了摆脱关联数组SERVICE_DNS，并处理v3的BASHPID。
解决方案 那么就有了一下的操作
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 diff --git a/src/tools/wg-quick/darwin.">问题原因 我可以理解，开发人员不想使用苹果使用的旧bash v3。但从用户的帖子来看，安装一个较新的bash并不那么好
所以我看了wireguard的wg-quick。需要支持的唯一变化，两个bash版本都是为了摆脱关联数组SERVICE_DNS，并处理v3的BASHPID。
解决方案 那么就有了一下的操作
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 diff --git a/src/tools/wg-quick/darwin.</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年4月23日 00:00:00"datetime="2023-04-23T00:00:00+08:00">2023年4月23日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>16 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/wireguard"
                    title="wireguard"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard</span>
                </a><a
                    href="/tags/wireguard-tool"
                    title="wireguard-tool"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard-tool</span>
                </a><a
                    href="/tags/wg-quick"
                    title="wg-quick"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wg-quick</span>
                </a><a
                    href="/tags/bash"
                    title="bash"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>bash</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/wireguard"
                    title="wireguard"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard</span>
                </a><a
                    href="/tags/wireguard-tool"
                    title="wireguard-tool"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard-tool</span>
                </a><a
                    href="/tags/wg-quick"
                    title="wg-quick"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wg-quick</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/"
    class="article-cover h-0Page(/posts/python/使用 Python ssh 远程登陆服务器的最佳方案/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#030e0e, #ccc);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
            data-src="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img.png"
            src="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_66df8b40cec26a8c5681f8581fbc4f22.jpg"
            
                data-srcset="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_catmullrom_3.png 1440w"
            alt="使用 Python ssh 远程登陆服务器的最佳方案"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
                src="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img.png"srcset="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_catmullrom_3.png 1440w"alt="使用 Python ssh 远程登陆服务器的最佳方案"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_66df8b40cec26a8c5681f8581fbc4f22.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">使用 Python ssh 远程登陆服务器的最佳方案</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="在使用 Python 写一些脚本的时候，在某些情况下，我们需要频繁登陆远程服务去执行一次命令，并返回一些结果。
在 shell 环境中，我们是这样子做的。
1 sshpass -p ${passwd} ssh -p ${port} -l ${user} -o StrictHostKeyChecking=no xx.xx.xx.xx &amp;#34;ls -l&amp;#34; 然后你会发现，你的输出有很多你并不需要，但是又不去不掉的一些信息（也许有方法，请留言交流），类似这样
1 2 3 4 5 6 host: xx.xx.xx.xx, port: xx Warning: Permanently added &amp;#39;[xx.xx.xx.xx]:xx&amp;#39; (RSA) to the list of known hosts. Login failure: [Errno 1] This server is not registered to rmp platform, please confirm whether cdn server. total 4 -rw-r--r-- 1 root root 239 Mar 30 2018 admin-openrc 对于直接使用 shell 命令，来执行命令的，可以直接使用管道，或者将标准输出重定向到文件的方法取得执行命令返回的结果">在使用 Python 写一些脚本的时候，在某些情况下，我们需要频繁登陆远程服务去执行一次命令，并返回一些结果。
在 shell 环境中，我们是这样子做的。
1 sshpass -p ${passwd} ssh -p ${port} -l ${user} -o StrictHostKeyChecking=no xx.xx.xx.xx &amp;#34;ls -l&amp;#34; 然后你会发现，你的输出有很多你并不需要，但是又不去不掉的一些信息（也许有方法，请留言交流），类似这样
1 2 3 4 5 6 host: xx.xx.xx.xx, port: xx Warning: Permanently added &amp;#39;[xx.xx.xx.xx]:xx&amp;#39; (RSA) to the list of known hosts. Login failure: [Errno 1] This server is not registered to rmp platform, please confirm whether cdn server. total 4 -rw-r--r-- 1 root root 239 Mar 30 2018 admin-openrc 对于直接使用 shell 命令，来执行命令的，可以直接使用管道，或者将标准输出重定向到文件的方法取得执行命令返回的结果</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/04/19/%E4%BD%BF%E7%94%A8-python-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%96%B9%E6%A1%88.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">使用 Python ssh 远程登陆服务器的最佳方案</a><div class="mt-4 mb-1 line-clamp-2" title="在使用 Python 写一些脚本的时候，在某些情况下，我们需要频繁登陆远程服务去执行一次命令，并返回一些结果。
在 shell 环境中，我们是这样子做的。
1 sshpass -p ${passwd} ssh -p ${port} -l ${user} -o StrictHostKeyChecking=no xx.xx.xx.xx &amp;#34;ls -l&amp;#34; 然后你会发现，你的输出有很多你并不需要，但是又不去不掉的一些信息（也许有方法，请留言交流），类似这样
1 2 3 4 5 6 host: xx.xx.xx.xx, port: xx Warning: Permanently added &amp;#39;[xx.xx.xx.xx]:xx&amp;#39; (RSA) to the list of known hosts. Login failure: [Errno 1] This server is not registered to rmp platform, please confirm whether cdn server. total 4 -rw-r--r-- 1 root root 239 Mar 30 2018 admin-openrc 对于直接使用 shell 命令，来执行命令的，可以直接使用管道，或者将标准输出重定向到文件的方法取得执行命令返回的结果">在使用 Python 写一些脚本的时候，在某些情况下，我们需要频繁登陆远程服务去执行一次命令，并返回一些结果。
在 shell 环境中，我们是这样子做的。
1 sshpass -p ${passwd} ssh -p ${port} -l ${user} -o StrictHostKeyChecking=no xx.xx.xx.xx &amp;#34;ls -l&amp;#34; 然后你会发现，你的输出有很多你并不需要，但是又不去不掉的一些信息（也许有方法，请留言交流），类似这样
1 2 3 4 5 6 host: xx.xx.xx.xx, port: xx Warning: Permanently added &amp;#39;[xx.xx.xx.xx]:xx&amp;#39; (RSA) to the list of known hosts. Login failure: [Errno 1] This server is not registered to rmp platform, please confirm whether cdn server. total 4 -rw-r--r-- 1 root root 239 Mar 30 2018 admin-openrc 对于直接使用 shell 命令，来执行命令的，可以直接使用管道，或者将标准输出重定向到文件的方法取得执行命令返回的结果</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年4月19日 00:00:00"datetime="2023-04-19T00:00:00+08:00">2023年4月19日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>3 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/python"
                    title="python"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>python</span>
                </a><a
                    href="/tags/ssh"
                    title="ssh"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>ssh</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/python"
                    title="python"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>python</span>
                </a><a
                    href="/tags/ssh"
                    title="ssh"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>ssh</span>
                </a></div>
</div>

</article>
</div>
        </div><nav role="navigation" class="pagination bottom-0 left-0 flex w-full items-center justify-between pb-10 text-gray-600 dark:text-darkTextPlaceholder">
    <a
        href="/"
        title="上一页"
        class="opacity-0 pointer-events-noneflex h-10 w-10 cursor-pointer items-center justify-center rounded-full border bg-white text-xl transition duration-300 ease-[ease] hover:border-none hover:bg-theme hover:text-white dark:border-darkBorder dark:bg-darkBgAccent dark:text-darkTextPlaceholder dark:hover:text-darkText"
    >
        <i class="eva eva-arrow-left-outline"></i>
    </a>
    <span>- 第 1 页 共 3 页 -</span>
    <a
        href="/page/2/"
        title="下一页"
        class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border bg-white text-xl transition duration-300 ease-[ease] hover:border-none hover:bg-theme hover:text-white dark:border-darkBorder dark:bg-darkBgAccent dark:text-darkTextPlaceholder dark:hover:text-darkText"
    >
        <i class="eva eva-arrow-right-outline"></i>
    </a>
</nav>
</div></div>
                </main><footer>
    <div
        class="com-footer flex flex-col items-center border-t py-4 px-4 text-sm leading-none text-gray-600 dark:border-darkBorder dark:text-darkTextPlaceholder md:flex-row md:justify-between"
    >
        <div class="mb-2 flex items-center justify-between text-center md:mb-0">
            <span class="">© 2022 - 2023</span>
            <span class="mx-1.5 opacity-50"> | </span>由 <a data-no-swup class="mx-1 font-bold hover:text-theme" href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> <span class="text-xs opacity-70">❤</span> <a data-no-swup class="mx-1 font-bold hover:text-theme" href="https://github.com/Ice-Hazymoon/hugo-theme-luna" target="_blank" rel="noopener noreferrer">Luna</a> 驱动</div>

        <div class="flex items-center"><span class="noscript-hidden mx-1.5 hidden opacity-50 md:block"> | </span><a data-no-swup href="/index.xml" target="_blank" class="mr-1.5 hover:text-theme">
                    <span class=" md:hidden lg:inline"><svg t="1650887361919" class="mr-0.5 w-3 fill-current text-inherit inline-block align-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3091"><path d="M320.16155 831.918c0 70.738-57.344 128.082-128.082 128.082S63.99955 902.656 63.99955 831.918s57.344-128.082 128.082-128.082 128.08 57.346 128.08 128.082z m351.32 94.5c-16.708-309.2-264.37-557.174-573.9-573.9C79.31155 351.53 63.99955 366.21 63.99955 384.506v96.138c0 16.83 12.98 30.944 29.774 32.036 223.664 14.568 402.946 193.404 417.544 417.544 1.094 16.794 15.208 29.774 32.036 29.774h96.138c18.298 0.002 32.978-15.31 31.99-33.58z m288.498 0.576C943.19155 459.354 566.92955 80.89 97.00555 64.02 78.94555 63.372 63.99955 77.962 63.99955 96.032v96.136c0 17.25 13.67 31.29 30.906 31.998 382.358 15.678 689.254 322.632 704.93 704.93 0.706 17.236 14.746 30.906 31.998 30.906h96.136c18.068-0.002 32.658-14.948 32.01-33.008z" p-id="3092"></path></svg></span>
                    <span>RSS</span>
                </a><a data-no-swup href="/sitemap.xml" target="_blank" class="mr-1.5 hover:text-theme">
                    <span class=" md:hidden lg:inline"><svg t="1650887940556" class="mr-0.5 w-3 fill-current text-inherit inline-block align-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6291"><path d="M950.044 625.778h-68.266v-56.89c0-45.51-39.822-85.332-85.334-85.332h-256v-85.334h68.267c39.822 0 73.956-34.133 73.956-73.955V130.844c0-39.822-34.134-73.955-73.956-73.955H415.29c-39.822 0-73.956 34.133-73.956 73.955v193.423c0 39.822 34.134 73.955 73.956 73.955h68.267v85.334h-256c-45.512 0-85.334 39.822-85.334 85.333v56.889H73.956C34.133 625.778 0 659.91 0 699.733v193.423c0 39.822 34.133 73.955 73.956 73.955h193.422c39.822 0 73.955-34.133 73.955-73.955V699.733c0-39.822-34.133-73.955-73.955-73.955H199.11v-56.89c0-17.066 11.378-28.444 28.445-28.444h568.888c17.067 0 28.445 11.378 28.445 28.445v56.889h-68.267c-39.822 0-73.955 34.133-73.955 73.955v193.423c0 39.822 34.133 73.955 73.955 73.955h193.422c39.823 0 73.956-34.133 73.956-73.955V699.733c0-39.822-34.133-73.955-73.956-73.955z" p-id="6292"></path></svg></span>
                    <span>Sitemap</span>
                </a></div><div id="run-time" class="mt-2 flex-grow text-right md:mt-0">
    <span>运行时间： </span><b id="run-time-d">0</b>
    <span class="text-xs">天</span>
    <b id="run-time-h">0</b>
    <span class="text-xs">小时</span>
    <b id="run-time-m">0</b>
    <span class="text-xs">分钟</span>
    <b id="run-time-s">0</b>
    <span class="text-xs">秒</span>
</div>
</div>

    <script type="text/javascript">
window.__theme = {
    cdn: '',
    pjax: true ,
    isServer: false ,
    $version:"",
    lang: 'zh-cn',
    imageZoom: true ,
    lazyload: true ,
    bionicReading: {
        enabled: true ,
        skipLinks: false ,
        autoBionic: false ,
        excludeWords:[],
        excludeClasses:["github"],
        excludeNodeNames:[],
    },
    katex: true ,
    search: true ,
    backtop: true ,
    pangu: true ,
    autoDarkMode: false ,
    googleAnalytics:false,
    hugoEncrypt: {
        wrongPasswordText: '密码错误',
        userStorage:window['sessionStorage'],
    },
    console: {
        enabled: true ,
        leftColor: '#dd6065',
        rightColor: '#feb462',
        leftText: 'Almighty.YanTao',
        rightText: 'Powered by Hugo ❤ Luna',
    },
    assets: {
        error_svg: "\/images\/error.svg",
        search_svg: "\/images\/search.svg",
    },
    i18n: {
        copy: {
            success: "复制成功",
            failed: "复制失败，请手动复制",
            copyCode: "复制代码",
        },
        search: {
            untitled: "无标题",
            loadFailure: "初始化搜索引擎失败",
            input: "请输入内容...",
        },
        darkMode: {
            dark: "切换到夜间模式",
            light: "切换到日间模式"
        }
    },creatTime: "2022\/10\/23"}
</script>
<script type="text/javascript" src="/ts/main.1f7accfe243b98c78d4e4dd412caf872a0bc99d72fa4ed9b8bdf02db3f739896.js" defer integrity="sha256-H3rM/iQ7mMeNTk3UEsr4cqC8mdcvpO2bi98C2z9zmJY="></script><script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('\/sw.js');
        });
    }
</script>






<script>
!function () {

    function n(n, e, t) {

        return n.getAttribute(e) || t

    }

    function e(n) {

        return document.getElementsByTagName(n)

    }

    function t() {

        var t = e("script"), o = t.length, i = t[o - 1];

        return {

            l: o, z: n(i, "zIndex", -1), o: n(i, "opacity", .5), c: n(i, "color", "0,0,0"), n: n(i, "count", 99)

        }

    }

    function o() {

        a = m.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,

            c = m.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight

    }

    function i() {

        r.clearRect(0, 0, a, c);

        var n, e, t, o, m, l;

        s.forEach(function (i, x) {

            for (i.x += i.xa, i.y += i.ya, i.xa *= i.x > a || i.x < 0 ? -1 : 1, i.ya *= i.y > c || i.y < 0 ? -1 : 1, r.fillRect(i.x - .5, i.y - .5, 1, 1), e = x + 1; e < u.length; e++)n = u[e],

                null !== n.x && null !== n.y && (o = i.x - n.x, m = i.y - n.y,

                    l = o * o + m * m, l < n.max && (n === y && l >= n.max / 2 && (i.x -= .03 * o, i.y -= .03 * m),

                        t = (n.max - l) / n.max, r.beginPath(), r.lineWidth = t / 2, r.strokeStyle = "rgba(" + d.c + "," + (t + .2) + ")", r.moveTo(i.x, i.y), r.lineTo(n.x, n.y), r.stroke()))

        }),

            x(i)

    }

    var a, c, u, m = document.createElement("canvas"),

        d = t(), l = "c_n" + d.l, r = m.getContext("2d"),

        x = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||

            function (n) {

                window.setTimeout(n, 1e3 / 45)

            },

        w = Math.random, y = {x: null, y: null, max: 2e4}; m.id = l, m.style.cssText = "position:fixed;top:0;left:0;z-index:" + d.z + ";opacity:" + d.o, e("body")[0].appendChild(m), o(), window.οnresize = o,

            window.onmousemove = function (n) {

                n = n || window.event, y.x = n.clientX, y.y = n.clientY

            },

            window.onmouseout = function () {

                y.x = null, y.y = null

            };

    for (var s = [], f = 0; d.n > f; f++) {

        var h = w() * a, g = w() * c, v = 2 * w() - 1, p = 2 * w() - 1; s.push({x: h, y: g, xa: v, ya: p, max: 6e3})

    }

    u = s.concat([y]),

        setTimeout(function () {i()}, 100)

}();
    
    
</script>

<script data-swup-reload-script>
    
    
</script>
</footer>
</div>
        </div><a
        href="#nav"
        title="返回顶部"
        id="back-top"
        class="fixed right-6 bottom-9 z-10 translate-y-3 scale-90 cursor-pointer rounded-full bg-white opacity-0 transition duration-300 ease-[ease] dark:bg-darkBgAccent sm:scale-100"
    >
        <div class="relative">
            <div class="absolute left-0 top-0 flex h-full w-full items-center justify-center text-xl">
                <i class="eva eva-arrow-upward-outline"></i>
            </div>
            <svg id="svg" width="54" height="54" viewBox="0 0 54 54" preserveAspectRatio="xMinYMin meet">
                <circle
                    transform="rotate(-90, 27 , 27)"
                    style="stroke-dasharray: 157, 157; stroke-dashoffset: 157;"
                    cx="27"
                    cy="27"
                    r="25"
                    fill="none"
                    stroke-width="4"
                    stroke-linecap="round"
                    stroke="var(--theme)"
                />
            </svg>
        </div>
    </a><noscript>
    <style>
        .dark-mode-switch,
        #run-time,
        #bionicReading,
        .noscript-hidden,
        [data-clipboard-text],
        [data-lazyload] {
            display: none;
        }
        #back-top {
            opacity: 1;
        }
        .noscript-show {
            display: initial;
        }
    </style>
</noscript>
</body>
</html>
