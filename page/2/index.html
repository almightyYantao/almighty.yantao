<!DOCTYPE html>
<html lang="zh-cn" class="lang-zh-cn">
    <head>
	<meta name="generator" content="Hugo 0.111.3"><meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="keywords" content="Hugo,Blog,Almighty.YanTao,yantao," /><meta name="description" content="一个混迹在IT行业的菜鸟" />
<meta itemprop="description" content="一个混迹在IT行业的菜鸟" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta itemprop="name" content="第 2 页 - Almighty.YanTao" />
<link href="/index.xml" title="第 2 页 - Almighty.YanTao" type="application/rss+xml" rel="alternate" />
<title>第 2 页 - Almighty.YanTao</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/main.93627df46d08f0fe0f2039b67a8f3d0fac9a0798cda92666aedb82d8221354d0.css" integrity="sha256-k2J99G0I8P4PIDm2eo89D6yaB5jNqSZmrtuC2CITVNA=" /><meta property="og:site_name" content="第 2 页 - Almighty.YanTao" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Almighty.YanTao" />
<meta property="og:description" content="一个混迹在IT行业的菜鸟" />
<meta property="og:url" content="/" /><meta property="article:publisher" content="/" /><meta property="og:updated_time" content=" 2023-07-08T15:52:50&#43;08:00 " /><meta name="theme-color" content="#dd6065" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="第 2 页 - Almighty.YanTao" />
<meta name="apple-mobile-web-app-status-bar-style" content="white" />

<meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@Almighty.YanTao" />
    <meta name="twitter:creator" content="@Almighty.YanTao" /><meta name="twitter:title" content="第 2 页 - Almighty.YanTao" />
<meta name="twitter:description" content="一个混迹在IT行业的菜鸟" />
<meta name="twitter:url" content="/" /><meta name="twitter:image" content="" />
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/favicon.ico" type="image/x-icon" /><link rel="manifest" href="/manifest.json" /><link href="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/icon.png" rel="shortcut icon" />
<link href="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/icon.png" rel="Bookmark" />
<link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/icon.png" /><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "\/","author": {
    "@type": "Person",
    "name": "Almighty.YanTao"
  },"description": "一个混迹在IT行业的菜鸟","name": "Almighty.YanTao"
}
</script> 


    </head>

    <body class="dark:bg-darkBg dark:text-darkText">
        <div class="relative mx-auto shadow-lg md:max-w-4xl xl:max-w-4xl 2xl:max-w-4xl">
            <div class="main flex flex-col justify-between bg-white dark:bg-darkFg"><header
    class="relative"
><nav id="nav" class="navbar top-0 z-10 flex items-center border-b px-5 py-6 dark:border-darkBorder md:px-10">
            <div class="route-items flex w-full items-center justify-around"><a
                        title="首页"
                        data-active-link="/"
                        href="/"
                        class="
                            link-exact-active
                         relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-home flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">首页</span>
                    </a><a
                        title="关于我"
                        data-active-link="/about/"
                        href="/about/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-heart flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">关于我</span>
                    </a><a
                        title="归档"
                        data-active-link="/archives/"
                        href="/archives/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-bar-chart flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">归档</span>
                    </a><a
                        title="GitHub"
                        data-active-link="/github/"
                        href="/github/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-github flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">GitHub</span>
                    </a><a
                        title="搜索"
                        data-active-link="/search/"
                        href="/search/"
                        class=" relative flex cursor-pointer flex-col items-center text-gray-700 transition duration-150 ease-[ease]"
                    >
                        <i
                            class="eva eva-search flex h-8 w-8 items-center justify-center text-3xl leading-none text-gray-500 transition duration-150 ease-[ease] dark:text-darkTextPlaceholder"
                        ></i>
                        <span class="mt-1 block text-xs text-gray-400 dark:text-darkText sm:text-sm md:hidden">搜索</span>
                    </a>
            </div>
        </nav><div class="dark-mode-switch absolute right-0 top-0 z-10 cursor-pointer pr-2 pt-2 text-xl leading-none">
    <i class="eva eva-moon opacity-20 dark:opacity-70"></i>
</div>
</header>
<main class=" relative flex flex-grow" id="swup"><style>:root {
        --font:Times New Roman,Times,Heti Song,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;
    }</style>
<div class="type-page layout- w-full"><div class="page-blog relative px-6 md:px-10">
        <div class="article-list mx-auto">
            <div class="flex items-center py-6 text-xl">
                <i class="eva eva-bar-chart-outline mr-2"></i><span>共 <span class="mx-1 text-theme">22</span> 篇文章</span>
            </div><div><article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/"
    class="article-cover h-0Page(/posts/other/hugo &#43; github自动化部署静态博客/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#d5d1c4, #64bdc6);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_1024x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
            data-src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img.png"
            src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_e96e1af13ea6d508a5e7c666992a71f5.jpg"
            
                data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_1024x0_resize_catmullrom_3.png 1080w"
            alt="hugo &#43; github自动化部署静态博客"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_1024x0_resize_q95_h2_catmullrom_3.webp 1080w" type="image/webp" /><img
                src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img.png"srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_1024x0_resize_catmullrom_3.png 1080w"alt="hugo &#43; github自动化部署静态博客"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/img_huf6171ab9e39e99b8563bb3587a747fa8_37967_e96e1af13ea6d508a5e7c666992a71f5.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">hugo &#43; github自动化部署静态博客</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="背景 在使用hugo &#43; nginx搭建好博客后，文章可以通过ftp上传到服务器，然后在服务器上再编译成网页，或者本地搭建的hugo环境，编译好网页再上传到服务器，这样做虽然也可以，但是很麻烦，如果每次都这么发布文章，肯定玩几次就不想弄了。
使用webhook就能实现自动部署，其实原理很简单。理想状态就是我把我的myblog项目托管到github，然后每次我写完文章直接push到github仓库，webhook监听到我的push，给我的服务器发送一个http请求，服务器收到请求后执行本地shell脚本，自动拉取最新的仓库代码，然后执行hugo编译成网页。这样就实现自动部署啦!
服务器环境配置 node 1 2 3 4 5 6 cd ~ wget https://nodejs.org/dist/v14.17.3/node-v14.17.3-linux-x64.tar.xz tar -xvf node-v14.17.3-linux-x64.tar.xz cd node-v14.17.3-linux-x64/bin ln -s /root/node-v14.17.3-linux-x64/bin/node /usr/bin/ ln -s /root/node-v14.17.3-linux-x64/bin/npm /usr/bin/ 我是centos系统，直接安装编译好的二进制文件了，之前试过自己编译，要等好久就放弃了
安装完后可以执行以下命令检查：
1 2 node -v npm -v pm2 1 2 3 npm install pm2@latest -g ln -s /root/node-v14.17.3-linux-x64/bin/pm2 /usr/bin/ pm2 -v 项目代码托管到github 在常用的本地机器上安装git，myblog 目录作为 git 仓库，push 到 github 进行备份。由于 public 目录下的静态网页完全可由其余文件自动生成，因此仓库可以排除 public 目录。
1 2 3 4 5 touch .">背景 在使用hugo &#43; nginx搭建好博客后，文章可以通过ftp上传到服务器，然后在服务器上再编译成网页，或者本地搭建的hugo环境，编译好网页再上传到服务器，这样做虽然也可以，但是很麻烦，如果每次都这么发布文章，肯定玩几次就不想弄了。
使用webhook就能实现自动部署，其实原理很简单。理想状态就是我把我的myblog项目托管到github，然后每次我写完文章直接push到github仓库，webhook监听到我的push，给我的服务器发送一个http请求，服务器收到请求后执行本地shell脚本，自动拉取最新的仓库代码，然后执行hugo编译成网页。这样就实现自动部署啦!
服务器环境配置 node 1 2 3 4 5 6 cd ~ wget https://nodejs.org/dist/v14.17.3/node-v14.17.3-linux-x64.tar.xz tar -xvf node-v14.17.3-linux-x64.tar.xz cd node-v14.17.3-linux-x64/bin ln -s /root/node-v14.17.3-linux-x64/bin/node /usr/bin/ ln -s /root/node-v14.17.3-linux-x64/bin/npm /usr/bin/ 我是centos系统，直接安装编译好的二进制文件了，之前试过自己编译，要等好久就放弃了
安装完后可以执行以下命令检查：
1 2 node -v npm -v pm2 1 2 3 npm install pm2@latest -g ln -s /root/node-v14.17.3-linux-x64/bin/pm2 /usr/bin/ pm2 -v 项目代码托管到github 在常用的本地机器上安装git，myblog 目录作为 git 仓库，push 到 github 进行备份。由于 public 目录下的静态网页完全可由其余文件自动生成，因此仓库可以排除 public 目录。
1 2 3 4 5 touch .</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/04/18/hugo--github%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">hugo &#43; github自动化部署静态博客</a><div class="mt-4 mb-1 line-clamp-2" title="背景 在使用hugo &#43; nginx搭建好博客后，文章可以通过ftp上传到服务器，然后在服务器上再编译成网页，或者本地搭建的hugo环境，编译好网页再上传到服务器，这样做虽然也可以，但是很麻烦，如果每次都这么发布文章，肯定玩几次就不想弄了。
使用webhook就能实现自动部署，其实原理很简单。理想状态就是我把我的myblog项目托管到github，然后每次我写完文章直接push到github仓库，webhook监听到我的push，给我的服务器发送一个http请求，服务器收到请求后执行本地shell脚本，自动拉取最新的仓库代码，然后执行hugo编译成网页。这样就实现自动部署啦!
服务器环境配置 node 1 2 3 4 5 6 cd ~ wget https://nodejs.org/dist/v14.17.3/node-v14.17.3-linux-x64.tar.xz tar -xvf node-v14.17.3-linux-x64.tar.xz cd node-v14.17.3-linux-x64/bin ln -s /root/node-v14.17.3-linux-x64/bin/node /usr/bin/ ln -s /root/node-v14.17.3-linux-x64/bin/npm /usr/bin/ 我是centos系统，直接安装编译好的二进制文件了，之前试过自己编译，要等好久就放弃了
安装完后可以执行以下命令检查：
1 2 node -v npm -v pm2 1 2 3 npm install pm2@latest -g ln -s /root/node-v14.17.3-linux-x64/bin/pm2 /usr/bin/ pm2 -v 项目代码托管到github 在常用的本地机器上安装git，myblog 目录作为 git 仓库，push 到 github 进行备份。由于 public 目录下的静态网页完全可由其余文件自动生成，因此仓库可以排除 public 目录。
1 2 3 4 5 touch .">背景 在使用hugo &#43; nginx搭建好博客后，文章可以通过ftp上传到服务器，然后在服务器上再编译成网页，或者本地搭建的hugo环境，编译好网页再上传到服务器，这样做虽然也可以，但是很麻烦，如果每次都这么发布文章，肯定玩几次就不想弄了。
使用webhook就能实现自动部署，其实原理很简单。理想状态就是我把我的myblog项目托管到github，然后每次我写完文章直接push到github仓库，webhook监听到我的push，给我的服务器发送一个http请求，服务器收到请求后执行本地shell脚本，自动拉取最新的仓库代码，然后执行hugo编译成网页。这样就实现自动部署啦!
服务器环境配置 node 1 2 3 4 5 6 cd ~ wget https://nodejs.org/dist/v14.17.3/node-v14.17.3-linux-x64.tar.xz tar -xvf node-v14.17.3-linux-x64.tar.xz cd node-v14.17.3-linux-x64/bin ln -s /root/node-v14.17.3-linux-x64/bin/node /usr/bin/ ln -s /root/node-v14.17.3-linux-x64/bin/npm /usr/bin/ 我是centos系统，直接安装编译好的二进制文件了，之前试过自己编译，要等好久就放弃了
安装完后可以执行以下命令检查：
1 2 node -v npm -v pm2 1 2 3 npm install pm2@latest -g ln -s /root/node-v14.17.3-linux-x64/bin/pm2 /usr/bin/ pm2 -v 项目代码托管到github 在常用的本地机器上安装git，myblog 目录作为 git 仓库，push 到 github 进行备份。由于 public 目录下的静态网页完全可由其余文件自动生成，因此仓库可以排除 public 目录。
1 2 3 4 5 touch .</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年4月18日 00:00:00"datetime="2023-04-18T00:00:00+08:00">2023年4月18日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>2 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/hugo"
                    title="hugo"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>hugo</span>
                </a><a
                    href="/tags/nginx"
                    title="nginx"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>nginx</span>
                </a><a
                    href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"
                    title="自动化部署"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>自动化部署</span>
                </a><a
                    href="/tags/github"
                    title="github"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>github</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/hugo"
                    title="hugo"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>hugo</span>
                </a><a
                    href="/tags/nginx"
                    title="nginx"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>nginx</span>
                </a><a
                    href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"
                    title="自动化部署"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>自动化部署</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/"
    class="article-cover h-0Page(/posts/wireguard/增加权限账号管理系统/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#e5d3d3, #b37678);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
            data-src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img.png"
            src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1ab723ab58b2faf975193f87837e8efa.jpg"
            
                data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_catmullrom_3.png 1440w"
            alt="通过iptables进行wireguard的权限管理"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
                src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img.png"srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1200x0_resize_catmullrom_3.png 1440w"alt="通过iptables进行wireguard的权限管理"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/img_hu7225715ee0e8d4f9853764366fc38ddf_51026_1ab723ab58b2faf975193f87837e8efa.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">通过iptables进行wireguard的权限管理</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="一、背景 由于目前openvpn的开源方案，链接VPN如果路由过多的话会导致链接速度变慢，效果非常的不理想，并且当iptables规则多的时候，转发明显性能下降；
准备采用wireguard的方式来代替openvpn的隧道协议，但是wireguard目前没有一个很好的权限管理方案；
二、服务端 2.1、安装wireguard 1 curl -O https://raw.githubusercontent.com/atrandys/wireguard/master/wg_mult.sh &amp;amp;&amp;amp; chmod &#43;x wg_mult.sh &amp;amp;&amp;amp; ./wg_mult.sh 2.2、设置访问权限 环境变量：WG_PEER_IP可以获取连接着的IP地址
1 2 PostUp = /path/to/script.sh PostDown = /path/to/teardown.sh 然后在根据情况设置ipset和iptables
2.3、脚本案例 /path/to/script.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/bin/bash result=$(curl -s &amp;#34;VPN后端连接接口地址&amp;#34; | jq &amp;#39;.d&amp;#39;) permissionsAccept=($(jq &amp;#39;.accept[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) permissionsDrop=($(jq &amp;#39;.drop[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) # 创建新的ipset组 ipset create $WG_PEER_IP hash:ip ipset create ${WG_PEER_IP}-drop hash:ip for ((i=0;i&amp;lt;${#permissionsAccept[@]};i&#43;&#43;)) do ipset add $WG_PEER_IP ${permissionsAccept[$i]//\&amp;#34;/} done for ((i=0;i&amp;lt;${#permissionsDrop[@]};i&#43;&#43;)) do ipset add ${WG_PEER_IP}-drop ${permissionsDrop[$i]//\&amp;#34;/} done # 设置iptables生效规则 iptables -A FORWARD -s $WG_PEER_IP -m set --match-set ${WG_PEER_IP}-drop dst -j DROP iptables -A FORWARD -s $WG_PEER_IP -m set --match-set $WG_PEER_IP dst -j ACCEPT # 剩余没有匹配到的全部拒绝 iptables -A FORWARD -s $WG_PEER_IP -j DROP if [ $code = -1 ];then exit 1 ; fi /path/to/teardown.">一、背景 由于目前openvpn的开源方案，链接VPN如果路由过多的话会导致链接速度变慢，效果非常的不理想，并且当iptables规则多的时候，转发明显性能下降；
准备采用wireguard的方式来代替openvpn的隧道协议，但是wireguard目前没有一个很好的权限管理方案；
二、服务端 2.1、安装wireguard 1 curl -O https://raw.githubusercontent.com/atrandys/wireguard/master/wg_mult.sh &amp;amp;&amp;amp; chmod &#43;x wg_mult.sh &amp;amp;&amp;amp; ./wg_mult.sh 2.2、设置访问权限 环境变量：WG_PEER_IP可以获取连接着的IP地址
1 2 PostUp = /path/to/script.sh PostDown = /path/to/teardown.sh 然后在根据情况设置ipset和iptables
2.3、脚本案例 /path/to/script.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/bin/bash result=$(curl -s &amp;#34;VPN后端连接接口地址&amp;#34; | jq &amp;#39;.d&amp;#39;) permissionsAccept=($(jq &amp;#39;.accept[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) permissionsDrop=($(jq &amp;#39;.drop[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) # 创建新的ipset组 ipset create $WG_PEER_IP hash:ip ipset create ${WG_PEER_IP}-drop hash:ip for ((i=0;i&amp;lt;${#permissionsAccept[@]};i&#43;&#43;)) do ipset add $WG_PEER_IP ${permissionsAccept[$i]//\&amp;#34;/} done for ((i=0;i&amp;lt;${#permissionsDrop[@]};i&#43;&#43;)) do ipset add ${WG_PEER_IP}-drop ${permissionsDrop[$i]//\&amp;#34;/} done # 设置iptables生效规则 iptables -A FORWARD -s $WG_PEER_IP -m set --match-set ${WG_PEER_IP}-drop dst -j DROP iptables -A FORWARD -s $WG_PEER_IP -m set --match-set $WG_PEER_IP dst -j ACCEPT # 剩余没有匹配到的全部拒绝 iptables -A FORWARD -s $WG_PEER_IP -j DROP if [ $code = -1 ];then exit 1 ; fi /path/to/teardown.</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/04/18/%E9%80%9A%E8%BF%87iptables%E8%BF%9B%E8%A1%8Cwireguard%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">通过iptables进行wireguard的权限管理</a><div class="mt-4 mb-1 line-clamp-2" title="一、背景 由于目前openvpn的开源方案，链接VPN如果路由过多的话会导致链接速度变慢，效果非常的不理想，并且当iptables规则多的时候，转发明显性能下降；
准备采用wireguard的方式来代替openvpn的隧道协议，但是wireguard目前没有一个很好的权限管理方案；
二、服务端 2.1、安装wireguard 1 curl -O https://raw.githubusercontent.com/atrandys/wireguard/master/wg_mult.sh &amp;amp;&amp;amp; chmod &#43;x wg_mult.sh &amp;amp;&amp;amp; ./wg_mult.sh 2.2、设置访问权限 环境变量：WG_PEER_IP可以获取连接着的IP地址
1 2 PostUp = /path/to/script.sh PostDown = /path/to/teardown.sh 然后在根据情况设置ipset和iptables
2.3、脚本案例 /path/to/script.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/bin/bash result=$(curl -s &amp;#34;VPN后端连接接口地址&amp;#34; | jq &amp;#39;.d&amp;#39;) permissionsAccept=($(jq &amp;#39;.accept[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) permissionsDrop=($(jq &amp;#39;.drop[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) # 创建新的ipset组 ipset create $WG_PEER_IP hash:ip ipset create ${WG_PEER_IP}-drop hash:ip for ((i=0;i&amp;lt;${#permissionsAccept[@]};i&#43;&#43;)) do ipset add $WG_PEER_IP ${permissionsAccept[$i]//\&amp;#34;/} done for ((i=0;i&amp;lt;${#permissionsDrop[@]};i&#43;&#43;)) do ipset add ${WG_PEER_IP}-drop ${permissionsDrop[$i]//\&amp;#34;/} done # 设置iptables生效规则 iptables -A FORWARD -s $WG_PEER_IP -m set --match-set ${WG_PEER_IP}-drop dst -j DROP iptables -A FORWARD -s $WG_PEER_IP -m set --match-set $WG_PEER_IP dst -j ACCEPT # 剩余没有匹配到的全部拒绝 iptables -A FORWARD -s $WG_PEER_IP -j DROP if [ $code = -1 ];then exit 1 ; fi /path/to/teardown.">一、背景 由于目前openvpn的开源方案，链接VPN如果路由过多的话会导致链接速度变慢，效果非常的不理想，并且当iptables规则多的时候，转发明显性能下降；
准备采用wireguard的方式来代替openvpn的隧道协议，但是wireguard目前没有一个很好的权限管理方案；
二、服务端 2.1、安装wireguard 1 curl -O https://raw.githubusercontent.com/atrandys/wireguard/master/wg_mult.sh &amp;amp;&amp;amp; chmod &#43;x wg_mult.sh &amp;amp;&amp;amp; ./wg_mult.sh 2.2、设置访问权限 环境变量：WG_PEER_IP可以获取连接着的IP地址
1 2 PostUp = /path/to/script.sh PostDown = /path/to/teardown.sh 然后在根据情况设置ipset和iptables
2.3、脚本案例 /path/to/script.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/bin/bash result=$(curl -s &amp;#34;VPN后端连接接口地址&amp;#34; | jq &amp;#39;.d&amp;#39;) permissionsAccept=($(jq &amp;#39;.accept[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) permissionsDrop=($(jq &amp;#39;.drop[]&amp;#39; &amp;lt;&amp;lt;&amp;lt;$result)) # 创建新的ipset组 ipset create $WG_PEER_IP hash:ip ipset create ${WG_PEER_IP}-drop hash:ip for ((i=0;i&amp;lt;${#permissionsAccept[@]};i&#43;&#43;)) do ipset add $WG_PEER_IP ${permissionsAccept[$i]//\&amp;#34;/} done for ((i=0;i&amp;lt;${#permissionsDrop[@]};i&#43;&#43;)) do ipset add ${WG_PEER_IP}-drop ${permissionsDrop[$i]//\&amp;#34;/} done # 设置iptables生效规则 iptables -A FORWARD -s $WG_PEER_IP -m set --match-set ${WG_PEER_IP}-drop dst -j DROP iptables -A FORWARD -s $WG_PEER_IP -m set --match-set $WG_PEER_IP dst -j ACCEPT # 剩余没有匹配到的全部拒绝 iptables -A FORWARD -s $WG_PEER_IP -j DROP if [ $code = -1 ];then exit 1 ; fi /path/to/teardown.</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年4月18日 00:00:00"datetime="2023-04-18T00:00:00+08:00">2023年4月18日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>2 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/wireguard"
                    title="wireguard"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard</span>
                </a><a
                    href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"
                    title="权限管理"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>权限管理</span>
                </a><a
                    href="/tags/%E6%9D%83%E9%99%90"
                    title="权限"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>权限</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/wireguard"
                    title="wireguard"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>wireguard</span>
                </a><a
                    href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"
                    title="权限管理"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>权限管理</span>
                </a><a
                    href="/tags/%E6%9D%83%E9%99%90"
                    title="权限"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>权限</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/03/11/linux%E9%80%9A%E8%BF%87snmp%E6%A3%80%E6%B5%8Btcpudp%E8%BF%9E%E6%8E%A5%E6%95%B0.html/"
    class="article-cover h-0Page(/posts/other/linux通过SNMP检测TCP&amp;UDP连接数/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="padding-bottom:42%;"
>
    <picture class="noscript-hidden"><img
            data-src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202303112218722.png"
            src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/images/outload.svg"
            alt="linux通过SNMP检测TCP&amp;UDP连接数"
            style="background-color: #fff;"
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><img
                src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202303112218722.png"alt="linux通过SNMP检测TCP&amp;UDP连接数"style="background-color: #fff;"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">linux通过SNMP检测TCP&amp;UDP连接数</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="先上图&amp;amp;介绍 记录一次全球化网络监控的看板建设； 之前都是通过zabbix来进行建设看板，但是用了一段时间后总是缺点感觉；后面通过大佬的介绍，试用了Grafana，这不试用还好，一试用，效果的展现让我无法自拔，这就是我想要的监控看板啊！能根据数值的不同进行颜色的区分，在大屏上一眼就可以看出当前哪一块网络出现了问题！
美中不足的是，上面的两列不能设置报警，报警貌似必须是图表形式的才可以；不过可以建立一个通用的报警看板，问题不大～
其他的一些监控项都是最简单基础的，我这边就不过多的赘述，大家可以自行上网搜索，或者之前引用之前zabbix的数据，主要讲解下TCP连接数和UDP连接数的获取
别的不说，这图还是很好看的； 准备 SNMP 自定义OID snmp安装 1 2 3 yum install net-snmp systemctl start snmpd systemctl enable snmpd 修改配置文件 1 2 3 4 5 6 7 8 # 修改团体名 com2sec notConfigUser default xxxxx # view systemview included .1.3.6.1.2.1. （这两行注释） # view systemview included .1.3.6.1.2.1.25.1.1 # 这两行新增，表示可以查看所有的信息，要不然只能查看上面那两个指定的信息 view all included . view systemview included .1 创建获取连接数脚本 1 2 3 4 #!/bin/bash echo $2 echo integer echo $(netstat -an|awk &amp;#39;/^tcp/ {&#43;&#43;s[$NF]} END {for(a in s ) print a,s[a]}&amp;#39; | grep ESTABLISHED | awk &amp;#39;{print $2}&amp;#39;) 这个是获取TCP连接数的脚本，如果要获取UDP的，请把tcp改成udp 设置脚本权限">先上图&amp;amp;介绍 记录一次全球化网络监控的看板建设； 之前都是通过zabbix来进行建设看板，但是用了一段时间后总是缺点感觉；后面通过大佬的介绍，试用了Grafana，这不试用还好，一试用，效果的展现让我无法自拔，这就是我想要的监控看板啊！能根据数值的不同进行颜色的区分，在大屏上一眼就可以看出当前哪一块网络出现了问题！
美中不足的是，上面的两列不能设置报警，报警貌似必须是图表形式的才可以；不过可以建立一个通用的报警看板，问题不大～
其他的一些监控项都是最简单基础的，我这边就不过多的赘述，大家可以自行上网搜索，或者之前引用之前zabbix的数据，主要讲解下TCP连接数和UDP连接数的获取
别的不说，这图还是很好看的； 准备 SNMP 自定义OID snmp安装 1 2 3 yum install net-snmp systemctl start snmpd systemctl enable snmpd 修改配置文件 1 2 3 4 5 6 7 8 # 修改团体名 com2sec notConfigUser default xxxxx # view systemview included .1.3.6.1.2.1. （这两行注释） # view systemview included .1.3.6.1.2.1.25.1.1 # 这两行新增，表示可以查看所有的信息，要不然只能查看上面那两个指定的信息 view all included . view systemview included .1 创建获取连接数脚本 1 2 3 4 #!/bin/bash echo $2 echo integer echo $(netstat -an|awk &amp;#39;/^tcp/ {&#43;&#43;s[$NF]} END {for(a in s ) print a,s[a]}&amp;#39; | grep ESTABLISHED | awk &amp;#39;{print $2}&amp;#39;) 这个是获取TCP连接数的脚本，如果要获取UDP的，请把tcp改成udp 设置脚本权限</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/03/11/linux%E9%80%9A%E8%BF%87snmp%E6%A3%80%E6%B5%8Btcpudp%E8%BF%9E%E6%8E%A5%E6%95%B0.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">linux通过SNMP检测TCP&amp;UDP连接数</a><div class="mt-4 mb-1 line-clamp-2" title="先上图&amp;amp;介绍 记录一次全球化网络监控的看板建设； 之前都是通过zabbix来进行建设看板，但是用了一段时间后总是缺点感觉；后面通过大佬的介绍，试用了Grafana，这不试用还好，一试用，效果的展现让我无法自拔，这就是我想要的监控看板啊！能根据数值的不同进行颜色的区分，在大屏上一眼就可以看出当前哪一块网络出现了问题！
美中不足的是，上面的两列不能设置报警，报警貌似必须是图表形式的才可以；不过可以建立一个通用的报警看板，问题不大～
其他的一些监控项都是最简单基础的，我这边就不过多的赘述，大家可以自行上网搜索，或者之前引用之前zabbix的数据，主要讲解下TCP连接数和UDP连接数的获取
别的不说，这图还是很好看的； 准备 SNMP 自定义OID snmp安装 1 2 3 yum install net-snmp systemctl start snmpd systemctl enable snmpd 修改配置文件 1 2 3 4 5 6 7 8 # 修改团体名 com2sec notConfigUser default xxxxx # view systemview included .1.3.6.1.2.1. （这两行注释） # view systemview included .1.3.6.1.2.1.25.1.1 # 这两行新增，表示可以查看所有的信息，要不然只能查看上面那两个指定的信息 view all included . view systemview included .1 创建获取连接数脚本 1 2 3 4 #!/bin/bash echo $2 echo integer echo $(netstat -an|awk &amp;#39;/^tcp/ {&#43;&#43;s[$NF]} END {for(a in s ) print a,s[a]}&amp;#39; | grep ESTABLISHED | awk &amp;#39;{print $2}&amp;#39;) 这个是获取TCP连接数的脚本，如果要获取UDP的，请把tcp改成udp 设置脚本权限">先上图&amp;amp;介绍 记录一次全球化网络监控的看板建设； 之前都是通过zabbix来进行建设看板，但是用了一段时间后总是缺点感觉；后面通过大佬的介绍，试用了Grafana，这不试用还好，一试用，效果的展现让我无法自拔，这就是我想要的监控看板啊！能根据数值的不同进行颜色的区分，在大屏上一眼就可以看出当前哪一块网络出现了问题！
美中不足的是，上面的两列不能设置报警，报警貌似必须是图表形式的才可以；不过可以建立一个通用的报警看板，问题不大～
其他的一些监控项都是最简单基础的，我这边就不过多的赘述，大家可以自行上网搜索，或者之前引用之前zabbix的数据，主要讲解下TCP连接数和UDP连接数的获取
别的不说，这图还是很好看的； 准备 SNMP 自定义OID snmp安装 1 2 3 yum install net-snmp systemctl start snmpd systemctl enable snmpd 修改配置文件 1 2 3 4 5 6 7 8 # 修改团体名 com2sec notConfigUser default xxxxx # view systemview included .1.3.6.1.2.1. （这两行注释） # view systemview included .1.3.6.1.2.1.25.1.1 # 这两行新增，表示可以查看所有的信息，要不然只能查看上面那两个指定的信息 view all included . view systemview included .1 创建获取连接数脚本 1 2 3 4 #!/bin/bash echo $2 echo integer echo $(netstat -an|awk &amp;#39;/^tcp/ {&#43;&#43;s[$NF]} END {for(a in s ) print a,s[a]}&amp;#39; | grep ESTABLISHED | awk &amp;#39;{print $2}&amp;#39;) 这个是获取TCP连接数的脚本，如果要获取UDP的，请把tcp改成udp 设置脚本权限</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年3月11日 00:00:00"datetime="2023-03-11T00:00:00+08:00">2023年3月11日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/zabbix"
                    title="zabbix"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix</span>
                </a><a
                    href="/tags/tcp"
                    title="tcp"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>tcp</span>
                </a><a
                    href="/tags/udp"
                    title="udp"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>udp</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/zabbix"
                    title="zabbix"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix</span>
                </a><a
                    href="/tags/tcp"
                    title="tcp"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>tcp</span>
                </a><a
                    href="/tags/udp"
                    title="udp"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>udp</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/03/06/obsidian-%E5%85%8D%E8%B4%B9%E7%9A%84%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1.html/"
    class="article-cover h-0Page(/posts/Obsidian/Obsidian 免费的实时同步服务/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="padding-bottom:42%;"
>
    <picture class="noscript-hidden"><img
            data-src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202303061309538.png"
            src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/images/outload.svg"
            alt="Obsidian 免费的实时同步服务"
            style="background-color: #fff;"
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><img
                src="https://raw.githubusercontent.com/almightyYantao/blog-img/master/202303061309538.png"alt="Obsidian 免费的实时同步服务"style="background-color: #fff;"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">Obsidian 免费的实时同步服务</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="使用 fly.io 免费计划部署或自托管数据库，进行 LiveSync 插件的一系列配置后实现各设备间 Obsidian 实时增量修改同步，可以和官方同步服务相媲美。
使用 fly.io 这次使用的是 fly.io 的免费计划，fly.io 是一个 SAAS（是（Platform as a Service）的缩写，是指平台即服务）平台，可以搭建如静态博客、Nextjs、Nuxtjs、Deno、Go、Python 等底层的各种各样的服务。但首先需要自己注册一个账号，这里可以直接使用 Github 登录。 注意：fly.io 的使用需要绑卡，如果没有绑卡会在创建应用 章节出现 Error 提示。绑卡过程请在 fly.io 面板 中 Billing 进行。正常使用国内的双币卡就可以，注意请如实填写信息。没有卡的朋友可以去各银行办一张（超好过的😗）或试试虚拟卡？（虚拟卡只是博主想到的一种方案，没有试过）
安装 flyctl Windows 用户在本地打开 PowerShell 或 Windows 终端💻，输入：
1 iwr https://fly.io/install.ps1 -useb | iex 注意：CMD 中不支持上面的命令，如果电脑中只有 CMD，或许你需要安装 PowerShell （选择 latest 版本）或 Windows 终端 。
本地登录 1 flyctl auth signup 会自动打开浏览器进行验证账户操作。
创建应用 在本地任意位置创建一个 fly.io 的工作目录（其实就是创建个能找到的文件夹，你不会放桌面上了吧😂？）。
1 2 3 4 mkdir fly.io cd fly.">使用 fly.io 免费计划部署或自托管数据库，进行 LiveSync 插件的一系列配置后实现各设备间 Obsidian 实时增量修改同步，可以和官方同步服务相媲美。
使用 fly.io 这次使用的是 fly.io 的免费计划，fly.io 是一个 SAAS（是（Platform as a Service）的缩写，是指平台即服务）平台，可以搭建如静态博客、Nextjs、Nuxtjs、Deno、Go、Python 等底层的各种各样的服务。但首先需要自己注册一个账号，这里可以直接使用 Github 登录。 注意：fly.io 的使用需要绑卡，如果没有绑卡会在创建应用 章节出现 Error 提示。绑卡过程请在 fly.io 面板 中 Billing 进行。正常使用国内的双币卡就可以，注意请如实填写信息。没有卡的朋友可以去各银行办一张（超好过的😗）或试试虚拟卡？（虚拟卡只是博主想到的一种方案，没有试过）
安装 flyctl Windows 用户在本地打开 PowerShell 或 Windows 终端💻，输入：
1 iwr https://fly.io/install.ps1 -useb | iex 注意：CMD 中不支持上面的命令，如果电脑中只有 CMD，或许你需要安装 PowerShell （选择 latest 版本）或 Windows 终端 。
本地登录 1 flyctl auth signup 会自动打开浏览器进行验证账户操作。
创建应用 在本地任意位置创建一个 fly.io 的工作目录（其实就是创建个能找到的文件夹，你不会放桌面上了吧😂？）。
1 2 3 4 mkdir fly.io cd fly.</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/03/06/obsidian-%E5%85%8D%E8%B4%B9%E7%9A%84%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">Obsidian 免费的实时同步服务</a><div class="mt-4 mb-1 line-clamp-2" title="使用 fly.io 免费计划部署或自托管数据库，进行 LiveSync 插件的一系列配置后实现各设备间 Obsidian 实时增量修改同步，可以和官方同步服务相媲美。
使用 fly.io 这次使用的是 fly.io 的免费计划，fly.io 是一个 SAAS（是（Platform as a Service）的缩写，是指平台即服务）平台，可以搭建如静态博客、Nextjs、Nuxtjs、Deno、Go、Python 等底层的各种各样的服务。但首先需要自己注册一个账号，这里可以直接使用 Github 登录。 注意：fly.io 的使用需要绑卡，如果没有绑卡会在创建应用 章节出现 Error 提示。绑卡过程请在 fly.io 面板 中 Billing 进行。正常使用国内的双币卡就可以，注意请如实填写信息。没有卡的朋友可以去各银行办一张（超好过的😗）或试试虚拟卡？（虚拟卡只是博主想到的一种方案，没有试过）
安装 flyctl Windows 用户在本地打开 PowerShell 或 Windows 终端💻，输入：
1 iwr https://fly.io/install.ps1 -useb | iex 注意：CMD 中不支持上面的命令，如果电脑中只有 CMD，或许你需要安装 PowerShell （选择 latest 版本）或 Windows 终端 。
本地登录 1 flyctl auth signup 会自动打开浏览器进行验证账户操作。
创建应用 在本地任意位置创建一个 fly.io 的工作目录（其实就是创建个能找到的文件夹，你不会放桌面上了吧😂？）。
1 2 3 4 mkdir fly.io cd fly.">使用 fly.io 免费计划部署或自托管数据库，进行 LiveSync 插件的一系列配置后实现各设备间 Obsidian 实时增量修改同步，可以和官方同步服务相媲美。
使用 fly.io 这次使用的是 fly.io 的免费计划，fly.io 是一个 SAAS（是（Platform as a Service）的缩写，是指平台即服务）平台，可以搭建如静态博客、Nextjs、Nuxtjs、Deno、Go、Python 等底层的各种各样的服务。但首先需要自己注册一个账号，这里可以直接使用 Github 登录。 注意：fly.io 的使用需要绑卡，如果没有绑卡会在创建应用 章节出现 Error 提示。绑卡过程请在 fly.io 面板 中 Billing 进行。正常使用国内的双币卡就可以，注意请如实填写信息。没有卡的朋友可以去各银行办一张（超好过的😗）或试试虚拟卡？（虚拟卡只是博主想到的一种方案，没有试过）
安装 flyctl Windows 用户在本地打开 PowerShell 或 Windows 终端💻，输入：
1 iwr https://fly.io/install.ps1 -useb | iex 注意：CMD 中不支持上面的命令，如果电脑中只有 CMD，或许你需要安装 PowerShell （选择 latest 版本）或 Windows 终端 。
本地登录 1 flyctl auth signup 会自动打开浏览器进行验证账户操作。
创建应用 在本地任意位置创建一个 fly.io 的工作目录（其实就是创建个能找到的文件夹，你不会放桌面上了吧😂？）。
1 2 3 4 mkdir fly.io cd fly.</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年3月6日 00:00:00"datetime="2023-03-06T00:00:00+08:00">2023年3月6日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>3 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/obsidian"
                    title="Obsidian"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>Obsidian</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/obsidian"
                    title="Obsidian"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>Obsidian</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/03/05/%E9%80%9A%E8%BF%87-haproxy-%E5%AE%9E%E7%8E%B0-shadowshadows-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">通过 Haproxy 实现 Shadowshadows 负载均衡</div><div class="mt-4 mb-1 line-clamp-2" title="介绍 缺点：所有的SS的加密方式和密码必须一致 介绍：HAProxy是一个使用C语言编写的自由及开放原始码软件，其提供高可用性、负载均衡，以及基于TCP和HTTP的应用程序代理。
安装Haproxy 1 yum install haproxy 配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 global chroot /var/lib/haproxy pidfile /var/run/haproxy.pid user haproxy group haproxy defaults mode tcp #服务器默认的工作模式 balance roundrobin #服务器默认使用的均衡模式 retries 3 #三次连接失败表示服务器不可用 maxconn 5000 #最大连接数 timeout connect 500ms #连接超时 timeout client 3s #客户端超时 timeout server 3s #服务器超时 listen WebPanel mode http #这里使用HTTP模式 bind 10.">介绍 缺点：所有的SS的加密方式和密码必须一致 介绍：HAProxy是一个使用C语言编写的自由及开放原始码软件，其提供高可用性、负载均衡，以及基于TCP和HTTP的应用程序代理。
安装Haproxy 1 yum install haproxy 配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 global chroot /var/lib/haproxy pidfile /var/run/haproxy.pid user haproxy group haproxy defaults mode tcp #服务器默认的工作模式 balance roundrobin #服务器默认使用的均衡模式 retries 3 #三次连接失败表示服务器不可用 maxconn 5000 #最大连接数 timeout connect 500ms #连接超时 timeout client 3s #客户端超时 timeout server 3s #服务器超时 listen WebPanel mode http #这里使用HTTP模式 bind 10.</div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年3月5日 00:00:00"datetime="2023-03-05T00:00:00+08:00">2023年3月5日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"></div>
    <div class="flex items-center sm:hidden"></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/02/28/openwrt%E5%A4%9A%E6%8B%A8%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">OpenWrt多拨使用教程</div><div class="mt-4 mb-1 line-clamp-2" title=" 多拨类 多拨相关的插件主要是 多线多拨 和 负载均衡 插件。
Syncdial 多线多拨 使用macvlan驱动创建多个虚拟WAN口，支持并发多拨
1 opkg install luci-app-syncdial MWAN3负载均衡 支持多根网线或者多个PPPOE账号的同时拨号使用和负载均衡。并且还可以通过Ping方式来检测中断线路并自动屏蔽中断线路
1 opkg install luci-i18n-mwan3-zh-cn 其他 如发现无法安装或更新，请执行以下操作
更新OPKG软件列表 1 opkg update "> 多拨类 多拨相关的插件主要是 多线多拨 和 负载均衡 插件。
Syncdial 多线多拨 使用macvlan驱动创建多个虚拟WAN口，支持并发多拨
1 opkg install luci-app-syncdial MWAN3负载均衡 支持多根网线或者多个PPPOE账号的同时拨号使用和负载均衡。并且还可以通过Ping方式来检测中断线路并自动屏蔽中断线路
1 opkg install luci-i18n-mwan3-zh-cn 其他 如发现无法安装或更新，请执行以下操作
更新OPKG软件列表 1 opkg update </div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年2月28日 00:00:00"datetime="2023-02-28T00:00:00+08:00">2023年2月28日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/openwrt"
                    title="openwrt"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>openwrt</span>
                </a><a
                    href="/tags/%E5%A4%9A%E6%8B%A8"
                    title="多拨"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>多拨</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/openwrt"
                    title="openwrt"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>openwrt</span>
                </a><a
                    href="/tags/%E5%A4%9A%E6%8B%A8"
                    title="多拨"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>多拨</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
>

<a
    href="/2023/02/21/python-chatgpt-telegram-bot.html/"
    class="article-cover h-0Page(/posts/python/Python ChatGPT Telegram Bot/index.zh-cn.md) relative block w-full transition duration-100 ease-[ease]"
    style="background-image: linear-gradient(180deg,#030e0e, #ccc);padding-bottom:42%;"
>
    <picture class="noscript-hidden"><source data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
            data-src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img.png"
            src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_66df8b40cec26a8c5681f8581fbc4f22.jpg"
            
                data-srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_catmullrom_3.png 1440w"
            alt="Python ChatGPT Telegram Bot"
            
            class="noscript-hidden 
                absolute
             left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            data-lazyload data-lazyload-blur
        />
    </picture>

    <noscript>
        <picture><source srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_q95_h2_catmullrom_3.webp 1440w" type="image/webp" /><img
                src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img.png"srcset="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_1440x0_resize_catmullrom_3.png 1440w"alt="Python ChatGPT Telegram Bot"class="absolute left-0 top-0 h-full w-full object-cover object-center transition duration-300 ease-[ease]"
            />
        </picture>
    </noscript><div
            class="cover-shadow absolute left-0 top-0 -z-10 hidden h-full w-full bg-cover bg-center bg-no-repeat transition duration-300 ease-[ease] md:block"
            style="background-image:url(https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/2023/02/21/python-chatgpt-telegram-bot.html/img_hu329e69c1adb399fa54b646fc6c6a5f6b_305113_66df8b40cec26a8c5681f8581fbc4f22.jpg)"
        ></div><div
        class="article-title absolute bottom-0 left-0 z-10 hidden h-4/5 w-full items-end p-5 text-2xl text-white dark:text-darkText sm:flex md:p-10 md:text-3xl"
    >
        <div class="w-full">
            <div class="font-bold line-clamp-2 md:line-clamp-3">Python ChatGPT Telegram Bot</div><div class="mt-2 hidden text-xl line-clamp-2 md:mt-4" title="注册 这里如何注册我就不说明了，大家自行去注册，主要是现在GPT的基本上已经备用很多了，导致了接码的价格也上涨了，而且使用token的话，其实还是很快可以用完免费的18美金； 接码：https://sms-activate.org/
准备材料 主要提供下Python的实现代码，首先需要准备一下的东西：
Telegram Bot 的 Key ：找机器人爸爸获取 ChatGPT 的 API Key ： https://platform.openai.com/account/api-keys 脚本： {% codeblock &amp;ldquo;main.py&amp;rdquo; lang:python &amp;gt;folded %}
1. Start by importing the necessary libraries and setting up the API clients import requests
import json
import os
import threading
OpenAI secret Key API_KEY = &amp;lsquo;xxxxxxxxx&amp;rsquo;
Models: text-davinci-003,text-curie-001,text-babbage-001,text-ada-001 MODEL = &amp;rsquo;text-davinci-003&#39;
Telegram secret access bot token BOT_TOKEN = &amp;lsquo;xxxxxxxxxxxxx&amp;rsquo;
Defining the bot&amp;rsquo;s personality using adjectives BOT_PERSONALITY = &#39;&#39;">注册 这里如何注册我就不说明了，大家自行去注册，主要是现在GPT的基本上已经备用很多了，导致了接码的价格也上涨了，而且使用token的话，其实还是很快可以用完免费的18美金； 接码：https://sms-activate.org/
准备材料 主要提供下Python的实现代码，首先需要准备一下的东西：
Telegram Bot 的 Key ：找机器人爸爸获取 ChatGPT 的 API Key ： https://platform.openai.com/account/api-keys 脚本： {% codeblock &amp;ldquo;main.py&amp;rdquo; lang:python &amp;gt;folded %}
1. Start by importing the necessary libraries and setting up the API clients import requests
import json
import os
import threading
OpenAI secret Key API_KEY = &amp;lsquo;xxxxxxxxx&amp;rsquo;
Models: text-davinci-003,text-curie-001,text-babbage-001,text-ada-001 MODEL = &amp;rsquo;text-davinci-003&#39;
Telegram secret access bot token BOT_TOKEN = &amp;lsquo;xxxxxxxxxxxxx&amp;rsquo;
Defining the bot&amp;rsquo;s personality using adjectives BOT_PERSONALITY = &#39;&#39;</div></div>
    </div>
</a>

<div class="block border-t px-5 pt-5 dark:border-darkBorder sm:hidden">
    <a href="/2023/02/21/python-chatgpt-telegram-bot.html/" class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">Python ChatGPT Telegram Bot</a><div class="mt-4 mb-1 line-clamp-2" title="注册 这里如何注册我就不说明了，大家自行去注册，主要是现在GPT的基本上已经备用很多了，导致了接码的价格也上涨了，而且使用token的话，其实还是很快可以用完免费的18美金； 接码：https://sms-activate.org/
准备材料 主要提供下Python的实现代码，首先需要准备一下的东西：
Telegram Bot 的 Key ：找机器人爸爸获取 ChatGPT 的 API Key ： https://platform.openai.com/account/api-keys 脚本： {% codeblock &amp;ldquo;main.py&amp;rdquo; lang:python &amp;gt;folded %}
1. Start by importing the necessary libraries and setting up the API clients import requests
import json
import os
import threading
OpenAI secret Key API_KEY = &amp;lsquo;xxxxxxxxx&amp;rsquo;
Models: text-davinci-003,text-curie-001,text-babbage-001,text-ada-001 MODEL = &amp;rsquo;text-davinci-003&#39;
Telegram secret access bot token BOT_TOKEN = &amp;lsquo;xxxxxxxxxxxxx&amp;rsquo;
Defining the bot&amp;rsquo;s personality using adjectives BOT_PERSONALITY = &#39;&#39;">注册 这里如何注册我就不说明了，大家自行去注册，主要是现在GPT的基本上已经备用很多了，导致了接码的价格也上涨了，而且使用token的话，其实还是很快可以用完免费的18美金； 接码：https://sms-activate.org/
准备材料 主要提供下Python的实现代码，首先需要准备一下的东西：
Telegram Bot 的 Key ：找机器人爸爸获取 ChatGPT 的 API Key ： https://platform.openai.com/account/api-keys 脚本： {% codeblock &amp;ldquo;main.py&amp;rdquo; lang:python &amp;gt;folded %}
1. Start by importing the necessary libraries and setting up the API clients import requests
import json
import os
import threading
OpenAI secret Key API_KEY = &amp;lsquo;xxxxxxxxx&amp;rsquo;
Models: text-davinci-003,text-curie-001,text-babbage-001,text-ada-001 MODEL = &amp;rsquo;text-davinci-003&#39;
Telegram secret access bot token BOT_TOKEN = &amp;lsquo;xxxxxxxxxxxxx&amp;rsquo;
Defining the bot&amp;rsquo;s personality using adjectives BOT_PERSONALITY = &#39;&#39;</div></div>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class="sm:text-inherit flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年2月21日 00:00:00"datetime="2023-02-21T00:00:00+08:00">2023年2月21日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>3 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/python"
                    title="python"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>python</span>
                </a><a
                    href="/tags/chatgpt"
                    title="chatgpt"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>chatgpt</span>
                </a><a
                    href="/tags/gpt"
                    title="gpt"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>gpt</span>
                </a><a
                    href="/tags/telegram"
                    title="telegram"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>telegram</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/python"
                    title="python"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>python</span>
                </a><a
                    href="/tags/chatgpt"
                    title="chatgpt"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>chatgpt</span>
                </a><a
                    href="/tags/gpt"
                    title="gpt"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>gpt</span>
                </a></div>
</div>

</article>
<article
    class="article group relative mb-10 overflow-hidden rounded border bg-white transition duration-300 ease-[ease] dark:border-darkBorder dark:bg-darkBgAccent sm:border-transparent sm:hover:border-gray-200 sm:hover:shadow-none sm:dark:hover:border-gray-600 md:mb-16"
><a href="/2023/02/20/curl-%E6%A3%80%E6%B5%8B%E4%BB%A3%E7%90%86%E7%9A%84%E5%8F%AF%E7%94%A8%E6%80%A7%E4%BB%A5%E5%8F%8A%E5%BB%B6%E8%BF%9F.html/" class="block px-5 pt-5 dark:border-darkBorder">
    <div class="text-2xl font-bold transition line-clamp-2 group-hover:text-theme md:line-clamp-3">curl 检测代理的可用性以及延迟</div><div class="mt-4 mb-1 line-clamp-2" title="背景 在办公网的代理翻墙的过程中，经常没办法第一时间知道代理失效了，因为我们自身不是高用的用户，每次挂了都需要员工来反馈，体感非常的不好，因此想着可以通过zabbix如果把当前的延迟、可用性检测起来
通过Curl 检测Google的延迟 这里为啥是curl而不是ping，因为默认ping事不支持代理的，然而curl也可以做到真正的是否可用
1 curl -o /dev/null -x socks5h://127.0.0.1:12126 -s --connect-timeout 5 -w %{time_starttransfer}&amp;#34;\n&amp;#34; $1 socks5h的地址需要改成你的代理地址
1 2 3 4 5 6 7 8 9 10 # 获取当前代理的可用性 ```bash url=$1 result=($(curl -x socks5h://localhost:12126 -I -s --connect-timeout 5 ${url} | head -1 | tr &amp;#34;\r&amp;#34; &amp;#34;\n&amp;#34;)) if [ &amp;#34;${result[1]}&amp;#34; == $2 -a &amp;#34;${result[2]}&amp;#34; == &amp;#39;OK&amp;#39; ] then echo 1 else echo 0 fi zabbix操作脚本 1 2 3 4 5 # 延迟 UserParameter=googleTime[*],/etc/zabbix/script/googleTime.">背景 在办公网的代理翻墙的过程中，经常没办法第一时间知道代理失效了，因为我们自身不是高用的用户，每次挂了都需要员工来反馈，体感非常的不好，因此想着可以通过zabbix如果把当前的延迟、可用性检测起来
通过Curl 检测Google的延迟 这里为啥是curl而不是ping，因为默认ping事不支持代理的，然而curl也可以做到真正的是否可用
1 curl -o /dev/null -x socks5h://127.0.0.1:12126 -s --connect-timeout 5 -w %{time_starttransfer}&amp;#34;\n&amp;#34; $1 socks5h的地址需要改成你的代理地址
1 2 3 4 5 6 7 8 9 10 # 获取当前代理的可用性 ```bash url=$1 result=($(curl -x socks5h://localhost:12126 -I -s --connect-timeout 5 ${url} | head -1 | tr &amp;#34;\r&amp;#34; &amp;#34;\n&amp;#34;)) if [ &amp;#34;${result[1]}&amp;#34; == $2 -a &amp;#34;${result[2]}&amp;#34; == &amp;#39;OK&amp;#39; ] then echo 1 else echo 0 fi zabbix操作脚本 1 2 3 4 5 # 延迟 UserParameter=googleTime[*],/etc/zabbix/script/googleTime.</div></a>
<div class="article-info flex justify-between px-5 py-4 text-sm">
    <div class=" flex text-gray-400 dark:text-gray-400">
        <div class="mr-3 flex items-center md:mr-4">
            <i class="eva eva-clock-outline mr-1"></i>
            <span>
                <time
                    class="block"
                    title="2023年2月20日 00:00:00"datetime="2023-02-20T00:00:00+08:00">2023年2月20日</time
                >
            </span>
        </div>
        <div class="mr-3 hidden items-center sm:flex md:mr-4">
            <i class="eva eva-book-open-outline mr-1"></i>
            <span>1 分钟</span>
        </div>
        
    </div>
    <div class="hidden items-center text-xs sm:flex"><a
                    href="/tags/curl"
                    title="curl"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>curl</span>
                </a><a
                    href="/tags/%E4%BB%A3%E7%90%86"
                    title="代理"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>代理</span>
                </a><a
                    href="/tags/%E6%A3%80%E6%B5%8B"
                    title="检测"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>检测</span>
                </a><a
                    href="/tags/zabbix"
                    title="zabbix"
                    class="tag mx-1 flex items-center rounded-full bg-theme px-2 py-1 text-white transition duration-300 ease-[ease] dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>zabbix</span>
                </a></div>
    <div class="flex items-center sm:hidden"><a
                    href="/tags/curl"
                    title="curl"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>curl</span>
                </a><a
                    href="/tags/%E4%BB%A3%E7%90%86"
                    title="代理"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>代理</span>
                </a><a
                    href="/tags/%E6%A3%80%E6%B5%8B"
                    title="检测"
                    class="mx-1 flex items-center text-gray-500 text-opacity-70 hover:text-opacity-100 dark:text-darkText"
                >
                    <i class="eva eva-hash-outline mr-0.5"></i>
                    <span>检测</span>
                </a></div>
</div>

</article>
</div>
        </div><nav role="navigation" class="pagination bottom-0 left-0 flex w-full items-center justify-between pb-10 text-gray-600 dark:text-darkTextPlaceholder">
    <a
        href="/"
        title="上一页"
        class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border bg-white text-xl transition duration-300 ease-[ease] hover:border-none hover:bg-theme hover:text-white dark:border-darkBorder dark:bg-darkBgAccent dark:text-darkTextPlaceholder dark:hover:text-darkText"
    >
        <i class="eva eva-arrow-left-outline"></i>
    </a>
    <span>- 第 2 页 共 3 页 -</span>
    <a
        href="/page/3/"
        title="下一页"
        class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border bg-white text-xl transition duration-300 ease-[ease] hover:border-none hover:bg-theme hover:text-white dark:border-darkBorder dark:bg-darkBgAccent dark:text-darkTextPlaceholder dark:hover:text-darkText"
    >
        <i class="eva eva-arrow-right-outline"></i>
    </a>
</nav>
</div></div>
                </main><footer>
    <div
        class="com-footer flex flex-col items-center border-t py-4 px-4 text-sm leading-none text-gray-600 dark:border-darkBorder dark:text-darkTextPlaceholder md:flex-row md:justify-between"
    >
        <div class="mb-2 flex items-center justify-between text-center md:mb-0">
            <span class="">© 2022 - 2023</span>
            <span class="mx-1.5 opacity-50"> | </span>由 <a data-no-swup class="mx-1 font-bold hover:text-theme" href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> <span class="text-xs opacity-70">❤</span> <a data-no-swup class="mx-1 font-bold hover:text-theme" href="https://github.com/Ice-Hazymoon/hugo-theme-luna" target="_blank" rel="noopener noreferrer">Luna</a> 驱动</div>

        <div class="flex items-center"><span class="noscript-hidden mx-1.5 hidden opacity-50 md:block"> | </span><a data-no-swup href="/index.xml" target="_blank" class="mr-1.5 hover:text-theme">
                    <span class=" md:hidden lg:inline"><svg t="1650887361919" class="mr-0.5 w-3 fill-current text-inherit inline-block align-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3091"><path d="M320.16155 831.918c0 70.738-57.344 128.082-128.082 128.082S63.99955 902.656 63.99955 831.918s57.344-128.082 128.082-128.082 128.08 57.346 128.08 128.082z m351.32 94.5c-16.708-309.2-264.37-557.174-573.9-573.9C79.31155 351.53 63.99955 366.21 63.99955 384.506v96.138c0 16.83 12.98 30.944 29.774 32.036 223.664 14.568 402.946 193.404 417.544 417.544 1.094 16.794 15.208 29.774 32.036 29.774h96.138c18.298 0.002 32.978-15.31 31.99-33.58z m288.498 0.576C943.19155 459.354 566.92955 80.89 97.00555 64.02 78.94555 63.372 63.99955 77.962 63.99955 96.032v96.136c0 17.25 13.67 31.29 30.906 31.998 382.358 15.678 689.254 322.632 704.93 704.93 0.706 17.236 14.746 30.906 31.998 30.906h96.136c18.068-0.002 32.658-14.948 32.01-33.008z" p-id="3092"></path></svg></span>
                    <span>RSS</span>
                </a><a data-no-swup href="/sitemap.xml" target="_blank" class="mr-1.5 hover:text-theme">
                    <span class=" md:hidden lg:inline"><svg t="1650887940556" class="mr-0.5 w-3 fill-current text-inherit inline-block align-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6291"><path d="M950.044 625.778h-68.266v-56.89c0-45.51-39.822-85.332-85.334-85.332h-256v-85.334h68.267c39.822 0 73.956-34.133 73.956-73.955V130.844c0-39.822-34.134-73.955-73.956-73.955H415.29c-39.822 0-73.956 34.133-73.956 73.955v193.423c0 39.822 34.134 73.955 73.956 73.955h68.267v85.334h-256c-45.512 0-85.334 39.822-85.334 85.333v56.889H73.956C34.133 625.778 0 659.91 0 699.733v193.423c0 39.822 34.133 73.955 73.956 73.955h193.422c39.822 0 73.955-34.133 73.955-73.955V699.733c0-39.822-34.133-73.955-73.955-73.955H199.11v-56.89c0-17.066 11.378-28.444 28.445-28.444h568.888c17.067 0 28.445 11.378 28.445 28.445v56.889h-68.267c-39.822 0-73.955 34.133-73.955 73.955v193.423c0 39.822 34.133 73.955 73.955 73.955h193.422c39.823 0 73.956-34.133 73.956-73.955V699.733c0-39.822-34.133-73.955-73.956-73.955z" p-id="6292"></path></svg></span>
                    <span>Sitemap</span>
                </a></div><div id="run-time" class="mt-2 flex-grow text-right md:mt-0">
    <span>运行时间： </span><b id="run-time-d">0</b>
    <span class="text-xs">天</span>
    <b id="run-time-h">0</b>
    <span class="text-xs">小时</span>
    <b id="run-time-m">0</b>
    <span class="text-xs">分钟</span>
    <b id="run-time-s">0</b>
    <span class="text-xs">秒</span>
</div>
</div>

    <script type="text/javascript">
window.__theme = {
    cdn: 'https:\/\/cdn.jsdelivr.net\/gh\/almightyYantao\/almighty.yantao@master',
    pjax: true ,
    isServer: false ,
    $version:"",
    lang: 'zh-cn',
    imageZoom: true ,
    lazyload: true ,
    bionicReading: {
        enabled: true ,
        skipLinks: false ,
        autoBionic: false ,
        excludeWords:[],
        excludeClasses:["github"],
        excludeNodeNames:[],
    },
    katex: true ,
    search: true ,
    backtop: true ,
    pangu: true ,
    autoDarkMode: false ,
    googleAnalytics:false,
    hugoEncrypt: {
        wrongPasswordText: '密码错误',
        userStorage:window['sessionStorage'],
    },
    console: {
        enabled: true ,
        leftColor: '#dd6065',
        rightColor: '#feb462',
        leftText: 'Almighty.YanTao',
        rightText: 'Powered by Hugo ❤ Luna',
    },
    assets: {
        error_svg: "\/images\/error.svg",
        search_svg: "\/images\/search.svg",
    },
    i18n: {
        copy: {
            success: "复制成功",
            failed: "复制失败，请手动复制",
            copyCode: "复制代码",
        },
        search: {
            untitled: "无标题",
            loadFailure: "初始化搜索引擎失败",
            input: "请输入内容...",
        },
        darkMode: {
            dark: "切换到夜间模式",
            light: "切换到日间模式"
        }
    },creatTime: "2022\/10\/23"}
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/almightyYantao/almighty.yantao@master/ts/main.1f7accfe243b98c78d4e4dd412caf872a0bc99d72fa4ed9b8bdf02db3f739896.js" defer integrity="sha256-H3rM/iQ7mMeNTk3UEsr4cqC8mdcvpO2bi98C2z9zmJY="></script><script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('\/sw.js');
        });
    }
</script>






<script>
    
    
</script>

<script data-swup-reload-script>
    
    
</script>
</footer>
</div>
        </div><a
        href="#nav"
        title="返回顶部"
        id="back-top"
        class="fixed right-6 bottom-9 z-10 translate-y-3 scale-90 cursor-pointer rounded-full bg-white opacity-0 transition duration-300 ease-[ease] dark:bg-darkBgAccent sm:scale-100"
    >
        <div class="relative">
            <div class="absolute left-0 top-0 flex h-full w-full items-center justify-center text-xl">
                <i class="eva eva-arrow-upward-outline"></i>
            </div>
            <svg id="svg" width="54" height="54" viewBox="0 0 54 54" preserveAspectRatio="xMinYMin meet">
                <circle
                    transform="rotate(-90, 27 , 27)"
                    style="stroke-dasharray: 157, 157; stroke-dashoffset: 157;"
                    cx="27"
                    cy="27"
                    r="25"
                    fill="none"
                    stroke-width="4"
                    stroke-linecap="round"
                    stroke="var(--theme)"
                />
            </svg>
        </div>
    </a><noscript>
    <style>
        .dark-mode-switch,
        #run-time,
        #bionicReading,
        .noscript-hidden,
        [data-clipboard-text],
        [data-lazyload] {
            display: none;
        }
        #back-top {
            opacity: 1;
        }
        .noscript-show {
            display: initial;
        }
    </style>
</noscript>
</body>
</html>
